"use strict";function decimalAdjust(e,t,o){return"undefined"==typeof o||0===+o?Math[e](t):(t=+t,o=+o,isNaN(t)||"number"!=typeof o||o%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-o:-o))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+o:o))))}function app(e,t){function o(e){var t=getNotificationService(e);t.get({}).then(function(o){return o.notificationData&&o.notificationData.length?(e(".js-notification-list").append(t.getDOM(o.notificationData)),void(t.isUnread(o.notificationData)&&e(".js-notification-count").removeClass("hidden"))):(e(".js-notification-list").append(t.getEmptyDOM()),void e(".js-notification-count").addClass("hidden"))})}function a(t){var o=e(".js-notification").scrollTop()+e(".js-notification").height(),n=e(".js-notification").prop("scrollHeight");if(!(o<n||l)){l=!0,r.off();var s=e(".js-notification-list").children().last().data("time")||Date.now(),i=getNotificationService(e);e(".js-notification-list").append(e(i.getLoaderDOM()));var c=e(".js-notification-list").find(".js-notification-loader");i.get({timeBaseLine:s}).then(function(t){l=!1,c.remove(),t.notificationData&&t.notificationData.length&&(i.isUnread(t.notificationData)&&e(".js-notification-count").hasClass("hidden")&&e(".js-notification-count").removeClass("hidden"),e(".js-notification-list").append(i.getDOM(t.notificationData)),r=e(".js-notification").on("scroll",a))})}}function n(e){var o=getExploreService(e);o.get({filterExam:!0}).then(function(a){a.examCategories&&a.examCategories.length?(a.examCategories=getFlattenExamCat(a.examCategories),t.subscribedExamsData=a.examCategories.map(function(e){return{examid:e.examid,examname:e.examname}}),e('input[name="userId"]').val()?e(document).trigger("subscribeToExamTopics"):e(document).trigger("unsubscribeToExamTopics"),e(".js-explore-list").append(o.getDOM(a)),e(".js-drawer-explore-list").html(o.getDrawerDom(a))):e(".js-explore-list").append(o.getEmptyDOM())}).fail(function(){e(".js-explore-list").append(o.getEmptyDOM())})}var s=!1;e('input[name="userLoggedIn"]').length>0&&(s=!0),s?e(document).on("change",".ajax-image-upload__file",ajaxImageUpload):(t.addTofbAsyncInit(function(){FB.init({appId:"621920911182005",cookie:!1,xfbml:!1,version:"v2.5"}),attachClickHandlersForFB()}),e(document).on("click",".ajax-image-upload__file",function(e){e.preventDefault(),showAuthLogin()})),e(document).on("click",".js-read-more",handleReadMoreAction);var i=!1;e(document).on("touchstart",function(){i=!0}),e(document).on("touchmove",function(){i=!1}),e(document).on("click touchend",".js-read-more",function(e){i&&handleReadMoreAction(e)}),e(".js-show-more-boxes").on("click",handleShowMoreBoxesAction),e(".js-show-more").on("click",handleShowMoreAction),e(document).on("click",".js-search",handleSearchFormToggle),e(document).on("submit",".search__form",handleSearch),e(document).on("input",".search__field",handleSearchTextChange),e(document).on("click",".js-show-login",showAuthLogin),e(document).on("click",".js-show-register",showAuthRegister),e(document).on("click",".js-auth-toggle",toggleAuthForm),e(document).on("click",".js-close-auth",closeModal),e(document).on("click",".post__comment-image-prev--remove, .post__reply-image-prev--remove",removeImagePreview),e(document).on("mouseover",".js-prevent-body-scroll",preventBodyScroll),e(document).on("mouseout",".js-prevent-body-scroll",revertToDefaultScroll),e(document).on("click",".js-smiley-btn.smiley__btn",toggleSmileyPanel),e(document).on("keyup",handleKeyOps),e(document).on("click",".js-open-drawer",openDrawer),e(document).on("click",".js-close-drawer",closeDrawer),e(document).on("click",".js-drawer__sub-menu-btn",toggleDrawerSubMenu),e(document).on("click",".js-auth-forgot-psswd",forgotPsswd),e(document).on("click",".js-open-box",openBoxContainer),t.AccountKit_OnInteractive=function(){AccountKit.init({appId:621920911182005,state:"Gr@DUpCsrFT0kEn",version:"v1.1"})},e(document).on("submit",".modal #loginForm",loginWithPsswd),e(document).on("submit",".modal #signupForm",signupWithPassword),e(document).on("keyup",".modal #loginForm input, .modal #signupForm input",function(t){0!==e(this).val().trim().length?e(this).parent().find("label").css({transform:"translateY(-24px) translateX(-3px) scale3d(.9,.9,1)"}):e(this).parent().find("label").removeAttr("style")}),e(document).on("click",".js-sub-menu-link",toggleSubMenu),e(document).on("click",handleClickEvents),e(document).on("keyup",function(t){if(27===t.keyCode&&0==e(".modal.discard-poll.modal--open").length&&0==e(".modal.discard-post.modal--open").length){if(0!==e(".modal .create-poll").length)return void discardCommentPoll(t);if(0!==e(".modal .create-post").length)return void discardPost(t)}}),e(document).on("click",".js-close-modal",closeModal),e(document).on("click",".js-close-all-modal",closeAllModal),e(document).on("click",".toast-close",closeToast),renderHtmlToSubscribeExams(),e(document).on("click",".js-subscribe-exam",subscribeExam),e(document).on("click",".js-exam-category-settings",handleExamCategorySettings),e(document).on("click",".js-add-exam-category",handleAddExamCategory),e(document).on("click",".subscribe-exams__header__close-btn",function(){t.location.reload()}),e(".js-search-box").hasClass("search-box-focused")?e(".js-search-box").find("svg.cross-icon").css("display","block"):e(".js-search-box").find("svg.cross-icon").removeAttr("style"),e(document).on("click",".js-search-box",function(t){e(this).addClass("search-box-focused"),e(this).find('input[name="q"]').focus(),e(".js-search-box").find('input[name="q"]').val().length>0&&e(".js-search-box").find("svg.cross-icon").css("display","block"),t.stopImmediatePropagation()}),e(document).on("click","body",function(t){e(".js-search-box").removeClass("search-box-focused"),e(".js-search-box").find("svg.cross-icon").removeAttr("style"),0==e(".js-search-box").find('input[name="q"]').val().length&&e(".js-search-box").find('input[name="q"]').val("")}),e(document).on("keyup",'.js-search-box input[name="q"]',function(t){e(".js-search-box").find('input[name="q"]').val().length>0?e(".js-search-box").find("svg.cross-icon").css("display","block"):e(".js-search-box").find("svg.cross-icon").removeAttr("style")}),e(document).on("click",".js-clear-search-box",function(t){e(".js-search-box").find('input[name="q"]').val(""),e(".js-search-box").find("svg.cross-icon").removeAttr("style")}),e(document).on("submit","#searchBoxForm",function(t){return!!e(this).find('input[name="q"]').val().trim().length&&(e(this).find('input[name="q"]').val(e(this).find('input[name="q"]').val().trim()),!0)}),n(e);var r=e(".js-notification").on("scroll",a);s&&o(e);var l=!1}function getFlattenExamCat(e){return e=e||[],e.reduce(function(e,t){return t.subExams?e.concat(t.subExams):(e.push(t),e)},[])}function loadMore(){$("body").append("<div>"),$(window).bind("scroll",bindScroll)}function bindScroll(){$(window).scrollTop()+$(window).height()>$(document).height()-100&&($(window).unbind("scroll"),loadMore())}function handleReadMoreAction(e){e.currentTarget&&$(e.currentTarget).addClass("read-more--open")}function handleShowMoreAction(e){var t=$(this),o=t.data("action"),a=t.data("props");renderShowMoreData(t,o,a)}function handleShowMoreBoxesAction(e){var t=$(".js-show-more-boxes");$(".explore-boxes").toggleClass("explore-boxes--show-all"),updateShowMoreToggle(t)}function handleSearchFormToggle(){if($(".search.modal").hasClass("modal--open"))return void closeModal();var e=$(".search").html();openModal(e,"search"),$(".search__field").focus()}function renderShowMoreData(e,t,o){var a;"expand-and-hide"===t&&($(o.klass+" .hidden").slideDown(150),$(o.klass+" .hidden").removeClass("hidden"),e.fadeOut(),e.remove()),"show-more-list-item"===t&&(a=getListService(),a.getContent($,o.list).then(function(t){if(!t.posts||!t.posts.length)return void e.remove();var n=a.buildDOM(o,t.posts),s=a.getUpdatedProps(o,t);e.before(n),e.data("props",s)}).fail(function(e){console.error("Some error occured:",e)})),"show-more-user-videos"===t&&(a=getListService(),a.getMoreVideos($,o).then(function(t){if(!t.videos||!t.videos.length||"object"!=typeof t.videos||!t.newPageState)return void e.remove();var n=a.buildDOM(o,t.videos);o.newPageState=t.newPageState,e.before(n),e.data("props",o)}).fail(function(e){console.error("Some error occured:",e)}))}function showAuthLogin(e){var t=$(".auth_html").clone().find(".auth__body--login").removeClass("hidden").parent().html();openModal(t,"auth"),clickHandlersGoogle(),attachClickHandlersForFB()}function showAuthRegister(e){var t=$(".auth_html").clone().find(".auth__body--register").removeClass("hidden").parent().html();openModal(t,"auth"),clickHandlersGoogle(),attachClickHandlersForFB()}function toggleAuthForm(e){$(".modal.auth .auth__body--login").toggleClass("hidden"),$(".modal.auth .auth__body--register").toggleClass("hidden")}function handleSearchTextChange(){var e=$(this).val();(!e||e.length<1)&&$(".search").removeClass("search--show-results")}function handleSearch(e){$(".search").toggleClass("search--show-results"),e.preventDefault()}function updateShowMoreToggle(e){var t=["More","Less"],o=e.find("span"),a=document.querySelector(".js-show-more-boxes svg"),n=o.text(),s=t[1-t.indexOf(n)];a.classList.toggle("show-more-icon"),a.classList.toggle("show-less-icon"),o.text(s),e.toggleClass("explore-box--show-less"),e.toggleClass("explore-box--show-more")}function ajaxImageUpload(e){var t,o=$(this).closest(".create-poll-container"),a=$(this).closest(".post__comment-reply");t=a&&1===a.length?$(this).closest(".ajax-image-upload-container").find(".post__reply-image-prev.ajax-image-upload-prev"):$(this).closest(".ajax-image-upload-container").find(".post__comment-image-prev.ajax-image-upload-prev");var n=$(this).closest(".ajax-image-upload-form");if(this.files&&this.files[0]){var s=new FileReader;s.onload=function(e){t.length>0&&(t.find("img").attr("src",e.target.result),t.find(".image-link").attr("href",e.target.result),t.removeClass("hidden"),o&&1===o.length?($(n).attr("onsubmit",'return postContentImageForm(event, "poll")'),$(n).submit()):a&&1===a.length?($(n).attr("onsubmit",'return postContentImageForm(event, "reply")'),$(n).submit()):($(n).attr("onsubmit","return postContentImageForm(event)"),$(n).submit()))},s.readAsDataURL(this.files[0])}}function removeImagePreview(e){var t,o,a,n=$(this).closest(".create-poll-container"),s=$(this).closest(".post__comment-reply");s&&1===s.length?(o=$(this).closest(".ajax-image-upload-container").find(".post__reply-image-prev.ajax-image-upload-prev"),a=$(this).closest(".ajax-image-upload-container").find(".post__reply-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file")):(o=$(this).closest(".ajax-image-upload-container").find(".post__comment-image-prev.ajax-image-upload-prev"),a=$(this).closest(".ajax-image-upload-container").find(".post__comment-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file")),o.find("img").attr("src",""),o.find(".image-link").attr("href",""),o.find(".ajax-image-upload-prev__message").text(""),o.addClass("hidden"),1==a.length&&a.val(""),n&&1===n.length?(t=$(this).closest(".ajax-image-upload-container").find(".post__comment-create"),commentPollData.deleteImageDetails()):s&&1===s.length?(t=$(this).closest(".ajax-image-upload-container").find(".post__reply-create"),deleteReplyImageData($(this).closest(".post__comment").attr("data-comment-id"))):(t=$(this).closest(".ajax-image-upload-container").find(".post__comment-create"),deleteCommentImageData($(this).closest(".post").attr("data-id"))),hideLoader(t)}function submitPostContentImageForm(e){e.preventDefault();var t,o=$(e.target).closest(".post__comment-reply");t=o&&1===o.length?$(e.target).closest(".ajax-image-upload-container").find(".post__reply-image-prev.ajax-image-upload-prev"):$(e.target).closest(".ajax-image-upload-container").find(".ajax-image-upload-prev:not(.post__reply-image-prev)");var a=t.find(".ajax-image-upload-prev__message"),n=t.find(".ajax-image-upload-prev__upload-progress-bar");return a.text("Uploading...."),uploadPostContentImage(new FormData(e.target),function(e){n.css({width:e+"%"})}).then(function(e){try{e=JSON.parse(e)}catch(t){console.log(t),e={}}return e.error?(a.text(e.error),$.Deferred().reject(e)):e.success?(a.text(""),e):$.Deferred().reject("error")})}function uploadPostContentImage(e,t){return e.append("reqType","streamImage"),$.ajax({method:"POST",url:"/uploadPostContentImage",data:e,cache:!1,contentType:!1,processData:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){var o=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(o=Math.ceil(a/n*100)),t(o)},!0),e},mimeType:"multipart/form-data"})}function preventBodyScroll(e){$("body").css("overflow","hidden")}function revertToDefaultScroll(e){$("body").css("overflow","auto")}function toggleSmileyPanel(e){var t=$(this).parent();return t.find(".smiley__panel").length>0?void t.find(".smiley__panel").remove():(html=$(".smiley__panel-html").html(),void t.append(html))}function openModal(e,t){e=e||"";var o=1e4;t=t||"";var a='<div class="modal '+t+'"><div class="modal__overlay"></div><div class="modal__content flex-box flex-row"><div class="modal__visible-area flex-box flex-row"><div class="modal__visible-area__body">'+e+"</div></div></div></div>";$("body").append(a),$("body").css({overflow:"hidden"});var n=$("body").find(".modal"),s=$(n[n.length-1]);setTimeout(function(){s.addClass("modal--open"),s.css("z-index",o*n.length)},100)}function closeModal(e){e="string"==typeof e&&e?e:"";var t=$("body").find(".modal"+e);if(0!==t.length){var o=$(t[t.length-1]);o.removeClass("modal--open"),setTimeout(function(){o.remove(),t.length<=1&&$("body").css({overflow:"visible"})},200)}}function closeAllModal(){var e=$("body").find(".modal");0!==e.length&&$.each(e,function(t,o){var a=$(o);a.removeClass("modal--open"),setTimeout(function(){a.remove(),e.length<=1&&$("body").css({overflow:"visible"})},200)})}function closeEscapableModal(e){var t=$("body").find(".modal");0!==t.length&&(t=$(t[t.length-1]),27===e.keyCode&&t.hasClass("js-modal-esc")&&closeModal())}function handleKeyOps(e){closeEscapableModal(e)}function googleLogin(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"1026789393376-j1f207nq1uekrjq4v32g9c7u1pmm88mk.apps.googleusercontent.com"}),clickHandlersGoogle()})}function clickHandlersGoogle(){if("undefined"!=typeof auth2){var e=document.querySelectorAll(".modal .auth__google");e.length&&(e=Array.prototype.slice.call(e),e.forEach(function(e){var t=e.cloneNode(!0);$(t).removeClass("disabled"),e.parentNode.replaceChild(t,e),auth2.attachClickHandler(t,{},signInWithGoogle.bind(null,t),signInWithGoogleErr.bind(null,t))}))}}function signInWithGoogle(e,t){var o=$(e).closest(".auth__body"),a=$(e).closest(".auth__body").find(".auth__message"),n={email:t.w3.U3,token:t.Zi.id_token};showLoader(o),service.loginWithGoogle(n).then(function(e){var t=Boolean($(".js-open-drawer").length);return hideAuthBtns(),e.exam?(gaPush({eventCategory:(t?"mobile":"web")+" login",eventAction:"login complete",eventLabel:"g+"}),void window.location.reload()):(gaPush({eventCategory:(t?"mobile":"web")+" register",eventAction:"new register complete",eventLabel:"g+"}),void showSubscribeExamModal())}).fail(function(e){hideLoader(o),msg="Something went wrong";var t=parseJSON(e.responseText);t.message&&(msg=t.message),a.removeClass("hidden").find("span").text(msg)})}function signInWithGoogleErr(e,t){var o=$(e).closest(".auth__body").find(".auth__message");o.removeClass("hidden").find("span").text("Access Denied, unable to proceed")}function attachClickHandlersForFB(){"undefined"!=typeof FB&&($(document).off("click",".modal .auth__facebook"),$(document).on("click",".modal .auth__facebook",signInWithFb),$(".modal .auth__facebook").removeClass("disabled"))}function signInWithFb(e){function t(e){if("connected"==e.status){var t=!(!e.authResponse||!e.authResponse.grantedScopes||e.authResponse.grantedScopes.indexOf("email")===-1),n={token:e.authResponse.accessToken,deviceType:"web",grantedEmailScope:t};showLoader(o),service.loginWithFacebook(n).then(function(e){var t=Boolean($(".js-open-drawer").length);return hideAuthBtns(),e.exam?(gaPush({eventCategory:(t?"mobile":"web")+" login",eventAction:"login complete",eventLabel:"fb"}),void window.location.reload()):(gaPush({eventCategory:(t?"mobile":"web")+" register",eventAction:"new register complete",eventLabel:"fb"}),void showSubscribeExamModal())}).fail(function(e){hideLoader(o),msg="Something went wrong";var t=parseJSON(e.responseText);t.message&&(msg=t.message),a.removeClass("hidden").find("span").text(msg)})}}var o=$(e.target).closest(".auth__body"),a=$(e.target).closest(".auth__body").find(".auth__message");FB.login(t,{scope:"email",return_scopes:!0,auth_type:"rerequest"})}function showLoader(e,t){t=t||{};var o=$("<div></div>").html('<div class="loader flex-box flex-row"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 40 40" xml:space="preserve" width="40px" height="40px" class="circle-loader"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/common-icons-sprite.svg#circle-loader"></use></svg></div>').find(".loader");t.width&&o.find(".circle-loader").css("width",t.width),t.height&&o.find(".circle-loader").css("height",t.height),e.addClass("loader-container"),e.append(o)}function hideLoader(e){e.removeClass("loader-container"),e.find(".loader").remove()}function formDataToObj(e){return e.reduce(function(e,t){return e[t.name]=t.value,e},{})}function loginWithPsswd(e){e.preventDefault();var t=$(this).closest(".auth__body"),o=$(this).find(".auth__message"),a=formDataToObj($(this).serializeArray());if(!a.email||!a.password){var n="Please enter complete details";return void o.removeClass("hidden").find("span").text(n)}a.deviceType="web",showLoader(t),service.loginWithPsswd(a).then(function(e){var t=Boolean($(".js-open-drawer").length);gaPush({eventCategory:(t?"mobile":"web")+" login",eventAction:"login complete",eventLabel:"email"}),window.location.reload()}).fail(function(e){hideLoader(t),n="Something went wrong";var a=parseJSON(e.responseText);if(a.message&&(n=a.message),o.removeClass("hidden").find("span").text(n),401===e.status&&++incorrectLoginAttempt>1){var a={title:"Reset password",text:"You entered wrong password multiple times. Would you like to reset it",actionHtml:'<a class="js-close-modal light-grey">CANCEL</a><a class="js-auth-forgot-psswd js-close-modal">RESET PASSWORD</a>'};openModal(messagePopupHtml(a),"popup")}})}function signupWithPassword(e){e.preventDefault();var t=$(this).closest(".auth__body"),o=$(this).find(".auth__message"),a=formDataToObj($(this).serializeArray());if(!a.email||!a.password||!a.name){var n="Please enter complete details";return void o.removeClass("hidden").find("span").text(n)}a.deviceType="web",showLoader(t),service.signupWithPassword(a).then(function(e){var t=Boolean($(".js-open-drawer").length);return hideAuthBtns(),e.exam?(gaPush({eventCategory:(t?"mobile":"web")+" login",eventAction:"login complete",eventLabel:"email"}),void window.location.reload()):(gaPush({eventCategory:(t?"mobile":"web")+" register",eventAction:"new register complete",eventLabel:"email"}),void showSubscribeExamModal())}).fail(function(e){hideLoader(t),n="Something went wrong";var a=parseJSON(e.responseText);a.message&&(n=a.message),o.removeClass("hidden").find("span").text(n)})}function hideAuthBtns(){$(".main-header .auth").remove()}function getJSON(e){try{e=JSON.stringify(e)}catch(t){console.log(t),e=""}return e}function parseJSON(e){try{e=JSON.parse(e)}catch(t){console.log(t),e={}}return e}function toggleSubMenu(e){var t=$(this).parent().find(".js-sub-menu");"block"===t.css("display")||t.fadeIn(200,function(){t.addClass("js-hide-on-focusout")})}function handleClickEvents(e){hideElemsOnFocusOut(e)}function hideElemsOnFocusOut(e){var t,o=$(e.target);o.hasClass("js-hide-on-focusout")||0!==o.closest(".js-hide-on-focusout").length||$(".js-hide-on-focusout").each(function(e,o){$(o).fadeOut("fast",function(){$(o).removeClass("js-hide-on-focusout")}),$(o).closest(".filter-container__input").length>0&&(t=$(o).closest(".filter-container__input").find(".input-arrow-icon"),1==t.length&&removeClassFromSvg(t,"input-opened"))})}function addClassToSvg(e,t){var o=$(e).attr("class");o+=" "+t,$(e).attr("class",o)}function removeClassFromSvg(e,t){var o=$(e).attr("class");o=o.replace(new RegExp(t,"g"),""),$(e).attr("class",o.trim())}function renderHtmlToSubscribeExams(){return getExploreService($).get().then(function(e){var t=e.examCategories,o="";$.each(t,function(e,t){var a=!1,n=t.examid||"";t.subExams&&t.subExams.length>0&&(a=!0),o+='<a class="subscribe-exams__exam flex-box flex-row js-subscribe-exam" data-id="'+n+'" data-has-subExams="'+a+'" data-name="'+t.examname+'">',o+='<span class="subscribe-exams__exam__icon"><img src="'+(t.imageid?t.imageid:"")+'" class="img-responsive"></span>',o+='<p class="subscribe-exams__exam__name">'+t.examname+"</p>",o+="</a>"}),$(".subscribe-exams__html .subscribe-exams__body").html(o)})}function showSubscribeExamModal(){renderHtmlToSubscribeExams().then(function(){var e=$("body>.subscribe-exams__html").html();openModal(e,"subscribe-exams")})}function subscribeExam(e){var t=$(this).attr("data-has-subExams"),o=$(this).closest(".subscribe-exams__container").find(".subscribe-exams__message");if("true"===t)return void showSubExams($(this));var a=$(this).attr("data-id")||"",n=$(this).attr("data-name")||"",s=$(this).closest(".subscribe-exams__container");if(!a||!n){var i="Please select an exam";return void o.removeClass("hidden").find("span").text(i)}var r={exams:{}};r.exams[a]=n,showLoader(s),service.initExamsForUser(r).then(function(e){window.location.reload()}).fail(function(e){hideLoader(s),i="Something went wrong";var t=parseJSON(e.responseText);t.message&&(i=t.message),o.removeClass("hidden").find("span").text(i)})}function handleExamCategorySettings(e){var t=$(this).data("props");t.exam;if(t.exam){var o=t.exam.isSubscribed,a=$.extend({},t.exam,{isSubscribed:!o}),n=this;$(n).toggleClass("exam-preferences__subscribe-btn--subscribed"),showLoader($(n).parent()),toggleExamCategorySubscription(a).then(function(e){if(hideLoader($(n).parent()),e.success){$(n).data("props",{exam:a});var t="You have been successfully "+(o?"Unsubscribed":"Subscribed");createToast({closeButton:!0,message:t}),a.isSubscribed?subscribeExamDataToLocalStorage({id:a.examId,name:a.examName}):unsubscribeExamDataFromLocalStorage({id:a.examId,name:a.examName})}else $(n).toggleClass("exam-preferences__subscribe-btn--subscribed")})}}function handleAddExamCategory(e){var t=$(this).data("props");t.exam;if(t.exam){var o=t.exam.isSubscribed,a=$.extend({},t.exam,{isSubscribed:!o}),n=this;return toggleExamCategorySubscription(a).then(function(e){if(e.success)return $(n).hide(),createToast({closeButton:!0,message:"You have been successfully Subscribed"}),a.isSubscribed?subscribeExamDataToLocalStorage({id:a.examId,name:a.examName}):unsubscribeExamDataFromLocalStorage({id:a.examId,name:a.examName}),e})}}function showSubExams(e){var t=e.closest(".subscribe-exams__container");t.find(".subscribe-exams__header__text").text("Please select your stream"),getExploreService($).get().then(function(o){var a=o.examCategories,n=e.attr("data-name"),s=a.filter(function(e){return e.examname==n});if(0!==s.length){var i=s[0].subExams,r="";$.each(i,function(e,t){var o=!1,a=t.examid||"";t.subExams&&t.subExams.length>0&&(o=!0),r+='<a class="subscribe-exams__exam flex-box flex-row js-subscribe-exam" data-id="'+a+'" data-has-subExams="'+o+'" data-name="'+t.examname+'">',r+='<span class="subscribe-exams__exam__icon"><img src="'+t.imageid+'" class="img-responsive"></span>',r+='<p class="subscribe-exams__exam__name">'+t.examname+"</p>",r+="</a>"});var l=t.find(".subscribe-exams__body");l.addClass("subscribe-exams__body--sub-exams flex-box flex-row"),t.find(".subscribe-exams__body").html(r)}})}function getShowTime(e,t){if(e){var o=(new Date).getTimezoneOffset();e+=o;var a=new Date(e),n=new Date,s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=Math.abs(n.getTime()-a.getTime());if(t)return a.getDate()+" "+s[a.getMonth()]+" "+a.getFullYear();if(i<0)return"Just now";var r=Math.round(i/1e3),l=Math.round(r/60),c=Math.round(l/60),d=Math.round(c/24);if(0===c)return 0===l?"Just now":1===l?l+" min ago":l+" mins ago";if(0===d)return 1===c?c+" hour ago":c+" hours ago";if(l<=1440+n.getMinutes()+60*n.getHours()){var u=(a.getMinutes(),a.getHours());return u>12?"Yesterday, "+(u-12)+" pm":12===u?"Yesterday, "+u+" pm":0===u?"Yesterday, 12 am":u<10?"Yesterday, 0"+u+" am":"Yesterday, "+u+" am"}return s[a.getMonth()]+" "+a.getDate()}}function getListService(){function e(e,t){return e.post("/featuredList/getDataOfListWRTPostId",t)}function t(e,t){return e.ajax({method:"GET",url:"/api/post/userVideos",data:t,dataType:"json",contentType:"application/json"})}function o(e,t){return t.map(function(t){var o=!(!t.posttext||!t.posttext.videoData);return"shared"===t.posttype&&t.metadata&&(t=t.metadata),"test"===t.posttype?n(e,t):o||"article"!==t.posttype?!o&&"text"===t.posttype||"poll"===t.posttype?s(e,t):o?i(e,t):"":a(e,t)}).join("")}function a(e,t){var o=getSlugService(),a='<a class="list-item flex-box flex-row" href="/';return a+=o.slugifyPost(t,e.data&&e.data.examCategorySlug?e.data.examCategorySlug:"")+'">',a+='<div class="list-item__head flex-box flex-column no-padding"><img src="'+t.posttext.imageURL+'" class="list-img list-img--banner"></div>',a+='<div class="list-item__body flex-box flex-column u-flex-grow">',a+='<h3 class="post-title">'+t.posttext.title+"</h3>",a+='<p class="post-excerpt">'+t.posttext.excerpt+"</p>",a+='<ul class="post-info light-grey">',a+="<li>"+getShowTime(t.createdon)+"</li>",a+="<li>"+(t.likecount||0)+" upvotes</li>",a+="</ul></div></a>"}function n(e,t){var o=getSlugService(),a=!!t.submitted,n='<a class="list-item flex-box flex-row" href="/';return n+=o.slugifyPost(t,e.data&&e.data.examCategorySlug?e.data.examCategorySlug:"")+'">',n+='<div class="list-item__head flex-box flex-column very-light-grey-bg"><svg width="50" height="50" x="0" y="0" viewBox="0 0 56 56" xml:space="preserve" class="clock-icon list-img"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/clock-icon.svg#clock-icon"></use></svg>',a?n+='<p class="rocket-green s-14 semi-bold-font">Quiz Completed!</p>':(n+='<ul class="post-info grey post-info--quiz">',n+="<li>"+t.posttext.questionData.length+" Questions</li>",n+="<li>"+t.posttext.timeLimit+" Minutes</li></ul>"),n+="</div>",n+='<div class="list-item__body flex-box flex-column u-flex-grow"><h3 class="post-title">'+t.posttext.title+"</h3>",n+='<ul class="post-info light-grey">',n+="<li>"+getShowTime(t.createdon)+"</li>",n+="<li>"+r(t.testattemptcount)+" attempts</li>",n+="</ul></div></a>"}function s(e,t){var o=getSlugService(),a={poll:"https://gs-post-images.grdp.co/2016/11/img1478690875946-68-rs.png",text:"https://gs-post-images.grdp.co/2016/11/img1478693900508-63-rs.png"},n='<a class="list-item flex-box flex-row" href="/';return n+=o.slugifyPost(t,e.data&&e.data.examCategorySlug?e.data.examCategorySlug:"")+'">',n+='<div class="list-item__head flex-box flex-column very-light-grey-bg"><img src="'+a[t.posttype]+'" class="list-img">',n+='<p class="post-subject s-14 semi-bold-font grey">'+(t.subj&&Object.keys(t.subj)&&Object.keys(t.subj).length?t.subj[Object.keys(t.subj)[0]]:"")+"</p></div>",n+='<div class="list-item__body flex-box flex-column u-flex-grow"><h3 class="post-title">'+t.posttext.title+"</h3>",n+='<ul class="post-info light-grey"><li>'+getShowTime(t.createdon)+"</li><li>"+(t.likecount||0)+" upvotes</li></ul>",n+="</div></a>"}function i(e,t){var o=getSlugService(),a='<a class="list-item flex-box flex-row" href="/';return a+=o.slugifyPost(t,e.data&&e.data.examCategorySlug?e.data.examCategorySlug:"")+'">',a+='<div class="list-item__head flex-box flex-column no-padding"><img src="'+t.posttext.videoData.videoThumbnail+'" class="list-img list-img--banner">',a+='<img src="https://gs-post-images.grdp.co/2016/12/img1481704658352-48-rs-high-webp.png" class="list-play-icon"></div>',a+='<div class="list-item__body flex-box flex-column u-flex-grow"><h3 class="post-title">'+t.posttext.title+"</h3>",a+='<ul class="post-info light-grey"><li>'+getShowTime(t.createdon)+"</li><li>"+(t.likecount||0)+" upvotes</li></ul>",a+="</div></a>"}function r(e){var e=e||0;return 1e3>e?e:Math.ceil(e/1e3)+"K+"}function l(e,t){var o={},a=e.list.postCount+t.posts.length;o.postCount=a,o.refType=a<t.specialPostCount?"post":"filter";var n=t.posts[t.posts.length-1];return"post"===o.refType?o.ref=n.postid:o.ref=n.createdon,o.version=(e.list.version||Date.now())+1,$.extend({},e,{list:$.extend({},e.list,o)})}return{getContent:e,buildDOM:o,getUpdatedProps:l,getAttemptCount:r,getMoreVideos:t}}function getSlugService(){function e(e){for(var t=e.split(""),o=!1,a=t.length-1;a>=0;a--)if(" "!==t[a]&&i[t[a]]){o=!0;break}return o}function t(t){return t=[].concat(t).join(""),e(t)?t.split("").map(function(e){return" "===e?"-":e.match(/^\w+$/)?e:i[e]||""}).join(""):t}function o(e){return t(e||"").replace(/[^\w+]+/g," ").trim().replace(/\s+/g,"-").toLowerCase()}function a(e,t){var a=["article","test"],n=e.posttype;if(e.posttext&&e.posttext.postSlug&&e.posttext.postSlug.length>0)return e.posttext.postSlug+"-i-"+e.postid;if("shared"===n&&(e=e.metadata),a.indexOf(n)+1)return o(e.posttext.title)+"-i-"+e.postid;if("poll"===n)return"mcq-i-"+e.postid;var s={doubt:"query",studyTips:"shared-info"},i=s[e.posttext.subCategory];return"text"===n&&i?i+"-i-"+e.postid:"post-i-"+e.postid}function n(e,t){return"/user/"+o(e)+"-i-"+t}function s(e,t){return t+"-l-"+o(e.listName)+"-i-"+e.shorterId}var i={"अ":"A","आ":"Aa","इ":"I","ई":"Ee","उ":"U","ऊ":"Oo","ऋ":"Ri","ऌ":"Ll","ऍ":"El","ऎ":"Ell","ए":"E","ऐ":"Ey","ऑ":"Ol","ऒ":"Oll","ओ":"O","औ":"Ou","क":"K","ख":"Kh","ग":"G","घ":"Gh","ङ":"N","च":"Ch","छ":"Chh","ज":"J","झ":"Jh","ञ":"N","ट":"T","ठ":"Th","ड":"D","ढ":"Dh","ण":"N","त":"T","थ":"Th","द":"Th","ध":"Thh","न":"N","ऩ":"Nl","प":"P","फ":"F","ब":"B","भ":"Bh","म":"M","य":"Y","र":"R","ऱ":"Rl","ल":"L","ळ":"Ll","ऴ":"Lll","व":"V","श":"Sh","ष":"Shh","स":"S","ह":"H","ॐ":"Oms","क़":"Ql","ख़":"Khl","ग़":"Ghl","ज़":"Z","ड़":"ugDh","ढ़":"ugDhh","फ़":"Fl","य़":"Yl","ॠ":"Ri","ॡ":"Lll"};return{slugifyPost:a,slugifyList:s,slugifyUser:n}}function toggleExamCategorySubscription(e){return $.ajax({method:"POST",url:"/exams/updateExamsOfUser",data:JSON.stringify({exams:[e],deviceType:"web"}),dataType:"json",contentType:"application/json"})}function unsubscribeExamDataFromLocalStorage(e){var t=window.getExamTag(e),o=parseJSON(window.localStorage.getItem("topicsData"));o&&o.topics&&o.topics.length&&o.topics.indexOf(t)!==-1&&(o.topics.splice(o.topics.indexOf(t),1),window.topicsSubscribed=o,window.localStorage.setItem("topicsData",JSON.stringify(o)))}function subscribeExamDataToLocalStorage(e){var t=window.getExamTag(e),o=parseJSON(window.localStorage.getItem("topicsData"));o&&o.topics&&o.topics.length&&o.topics.indexOf(t)===-1&&(o.topics.push(t),window.topicsSubscribed=o,window.localStorage.setItem("topicsData",JSON.stringify(o)))}function getNotificationService(e){function t(t){return t.limit=t.limit||10,t.direction=t.direction||1,t.timeBaseLine=t.timeBaseLine||Date.now(),e.post("/user/getUserNotificationsWRTTime",{pageSize:t.limit,dir:t.direction,notifTime:t.timeBaseLine}).then(parseJSON)}function o(e){for(var t=!1,o=e.length-1;o>=0;o--)if("unread"===e[o].status){t=!0;break}return t}function a(t){return t.map(function(t){var o=t.notificationJsonData;t.text=t.text||"";var a="#";o.postId&&(a="/read-notification/"+o.postId+"?time="+t.notificationTime);var i="";return i+='<li class="notification__item__container',"unread"===t.status&&(i+=" notification__item__container--unread"),i+=t.time?'" data-time = "'+t.time+'">':'">',i+='<a class="flex-box flex-row main-header__notifications-panel-item" href="'+a+'">',i+='<div class="post__comment-user-pic" style="background: #ebebeb url('+(n(o.imagePath)||"https://gs-post-images.grdp.co/2016/11/img1479294686367-58-rs.png")+') no-repeat center center;background-size:cover"></div>',i+='<div class="flex-grow flex-box flex-column">',i+='<p class="s-16 notification__text">',t.names&&t.names.length&&(i+=s(t.names)),i+=" "+e("<div>"+t.text+"</div>").text()+"</p>",t.time&&(i+='<span class="s-14 medium-grey">'+getShowTime(+t.time)+"</span></div></a></li>"),i}).join(" ")}function n(e){if(!e)return e;var t=/(.+grdp\.co.+)(\.jpg|\.jpeg)/i,o=e.match(t);return o?o[1]+"-s"+o[2]:e}function s(e){var t="",o="";if(e.length<2)return e[0]?e[0].split(" ")[0]:" ";var a=e.map(function(e){return e.split(" ")[0]});return a.length<4?(t=a.splice(0,a.length-1).join(", "),o=" & "+a[0]):(t=a.splice(0,3).join(", "),o=" & "+a.length+" other"),t+o}function i(){var e={notificationJsonData:{},text:"You have no more notification"};return a([e])}function r(){var e='<li class="notification__item__container js-notification-loader">';return e+='<a class="flex-box flex-row main-header__notifications-panel-item" href="#">',e+='<div class="shimmer shimmer-circle-small"></div>',e+='<div class="flex-grow flex-box flex-column">',e+='<p class="s-16 notification__text"><span class="shimmer l-inline-block shimmer-bar-large"></span>',e+='<span class="shimmer l-inline-block  shimmer-bar-medium"></span>',e+='</p><span class="s-14 shimmer  l-inline-block shimmer-bar-small"></span>',e+="</div></a></li>"}return{get:t,getDOM:a,getEmptyDOM:i,isUnread:o,getLoaderDOM:r}}function getExploreService(e){function t(t){return e.get("/api/examCategory",t)}function o(e){var t=e.examCategories.map(function(t){var o="",a=e.slugStore.entity[t.examid+"examCategory"];a&&(o="/"+a.slug);var n='<a class=" s-15 main-header__explore-panel-item" href="'+o+'">';return n+=t.examname,n+="</a>"}).join(" ");return e.userLoggedIn&&(t+='<a class="main-header__explore-panel-item s-15 explore__add-examCategory-btn"',t+='href="/settings"> ADD MORE EXAMS </a>'),t}function a(e){var t=e.examCategories.map(function(t){var o="",a=e.slugStore.entity[t.examid+"examCategory"];a&&(o="/"+a.slug);var n='<li><a class="drawer__sub-menu-link" href="'+o+'">';return n+=t.examname,n+="</a></li>"}).join(" ");return e.userLoggedIn&&(t+='<li><a href="/settings" class="drawer__sub-menu-link light-grey drawer__add-category-btn">Add More Exams</a></li>'),t}function n(){var e='<a class="main-header__explore-panel-item s-15 explore__add-examCategory-btn"';return e+='href="/settings" class=""> ADD MORE EXAMS </a>'}return{get:t,getDOM:o,getEmptyDOM:n,getDrawerDom:a}}function addStickyHeader(e){if(e&&e.element&&!$(e.element).hasClass("js-sticky-header")){var t={};t.width=e.width||"100%",t.top=e.top||$(".main-header").height()+1+"px",$(e.element).addClass("js-sticky-header"),$(e.element).css(t)}}function removeStickyHeader(e){e&&e.element&&$(e.element).hasClass("js-sticky-header")&&($(e.element).removeClass("js-sticky-header"),$(e.element).removeAttr("style"))}function openDrawer(){$(".drawer__overlay").css("visibility","visible"),$(".drawer").addClass("drawer--open")}function closeDrawer(){$(".drawer").removeClass("drawer--open"),setTimeout(function(){$(".drawer__overlay").css("visibility","hidden")},200)}function toggleDrawerSubMenu(){var e=$(this).parent(),t=e.find(".js-drawer__sub-menu");if(t.length)return e.hasClass("drawer__sub-menu--closed")?void t.slideDown("normal",function(){e.removeClass("drawer__sub-menu--closed")}):void t.slideUp("normal",function(){e.addClass("drawer__sub-menu--closed")})}function copyToClipboard(e,t){var o=$("<textarea>");o.css("z-index","-9999"),$("body").append(o),o.val(window.location.origin+e).select();try{document.execCommand("copy"),t&&t(window.location.origin+e)}catch(e){console.log(e)}o.remove()}function verifyUserUsingAccKit(){function e(e){return"PARTIALLY_AUTHENTICATED"===e.status?t({authCode:e.code,response:e}).then(function(e){return"success"===e.status?o.resolve(e):"error"===e.status?o.reject(e):void 0}).fail(function(e){return o.reject(e)}):o.reject(e)}function t(e){return $.ajax({method:"POST",url:"/user/verifyUser",data:getJSON(e),dataType:"json",contentType:"application/json"})}var o=jQuery.Deferred();return AccountKit.login("PHONE",{countryCode:"+91",phoneNumber:""},e),o.promise()}function getAlreadyVerifedMobileHtml(e){return e=e||{},'<div class="safed-bg popup__body"><h2 class="popup__title">Phone Number Already Verified</h2><p class="light-grey popup__text">This phone number has been already verified with '+(e.email||"")+'. Do you wish to login with this email id? </p><div class="popup__action-bar flex-box flex-row"><a class="js-close-modal light-grey">CANCEL</a><a href="/auth/logout">LOGOUT</a></div></div>'}function forgotPsswd(e){var t=$(".modal.auth.modal--open");if(t.length){var o=t.find('#loginForm input[name="email"]'),a=t.find(".auth__body--login"),n={title:"Message"};if(o.length){var s=o.val();if(!s)return n.text="Please enter your email",void openModal(messagePopupHtml(n),"popup");var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!i.test(s))return n.text="Please Enter valid email",void openModal(messagePopupHtml(n),"popup");var r={email:s,version:"1"};showLoader(a),$.ajax({method:"POST",url:"/forgot",data:r}).then(function(e){return n.text="An email to reset password has been sent.",400===e.code?$.Deferred().reject(e):(e.msg&&(n.text=e.msg),void openModal(messagePopupHtml(n),"popup"))}).fail(function(e){e.text="Unable to reset, please try again later",400===e.code&&(e.text=e.msg),openModal(messagePopupHtml(e),"popup")}).always(function(){hideLoader(a)})}}}function messagePopupHtml(e){e=e||{};var t='<div class="safed-bg popup__body"><h2 class="popup__title">'+(e.title||"")+"</h2>";return t+='<p class="grey popup__text">'+(e.text||"")+"</p>",t+='<div class="popup__action-bar flex-box flex-row">'+(e.actionHtml||'<a class="js-close-modal">CLOSE</a>')+"</div></div>"}function createToast(e){var t={},o="";e=e||{},t.message=e.message?e.message:"Toast",t.toastClass=e.toastClass?e.toastClass:"",t.closeButton="boolean"!=typeof e.closeButton||e.closeButton,t.autoHide="boolean"!=typeof e.autoHide||e.autoHide,t.autoHideTime=e.autoHideTime?e.autoHideTime:3e3,e.action&&(t.action={},t.action.actionText=e.action.actionText?e.action.actionText:"",t.action.actionClass=e.action.actionClass?e.action.actionClass:""),o+='<div class="toast '+t.toastClass+'">',o+='<span class="toast-message">'+t.message+"</span>",e.action&&(o+='<span class="toast-action '+t.action.actionClass+'">'+t.action.actionText+"</span>"),t.closeButton?o+='<span class="toast-close"><svg width="16px" height="16px" x="0" y="0" viewBox="0 0 24 24" xml:space="preserve" class="cross-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/common-icons-sprite.svg#cross-icon"></use></svg></span>':t.autoHide=!0,o+="</div>",1==$("#toast-container").length?$("#toast-container").prepend(o):$("body").append('<div id="toast-container">'+o+"</div>"),t.autoHide&&setTimeout(function(){closeToast()},t.autoHideTime)}function closeToast(e){var t=$(this).closest(".toast"),o=$("#toast-container").find(".toast").length;1==o?$("#toast-container").remove():t&&t.length?t.remove():$("#toast-container .toast").last().remove()}function openBoxContainer(e){if(!($(e.target).closest(".box__items").length>0))if($(this).hasClass("box--open"))$(this).removeClass("box--open"),$(this).find(".box__items").removeAttr("style");else{var t=$(this).closest(".boxes").find(".box--open");$.each(t,function(e,t){$(t).removeClass("box--open"),$(t).find(".box__items").removeAttr("style")}),$(this).addClass("box--open");var o=$(this).closest(".box").offset().top-64;$(this).find(".box__items").css({display:"-webkit-box",display:"-moz-box",display:"-ms-flexbox",display:"-webkit-flex",display:"flex"}),$("body, html").animate({scrollTop:o},500)}}function getQueryParams(){for(var e,t=/\+/g,o=/([^&=]+)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(t," "))},n=window.location.search.substring(1),s={};e=o.exec(n);)s[a(e[1])]=a(e[2]);return s}function gaPush(e){e=e||{},dataLayer.push({event:"gaCustomEvent",eventCategory:e.eventCategory||"",eventAction:e.eventAction||"",eventLabel:e.eventLabel||"",eventValue:e.eventValue||0})}var auth2;Math.round10||(Math.round10=function(e,t){return decimalAdjust("round",e,t)}),Math.floor10||(Math.floor10=function(e,t){return decimalAdjust("floor",e,t)}),Math.ceil10||(Math.ceil10=function(e,t){return decimalAdjust("ceil",e,t)}),window.addTofbAsyncInit=function(){var e=[];return window.fbAsyncInit=function(){e.forEach(function(e){"function"==typeof e&&e()})},function(t){"function"==typeof t&&e.push(t)}}(),$(document).ready(app(jQuery,window));var incorrectLoginAttempt=0,service={loginWithPsswd:function(e){return $.ajax({method:"POST",url:"/auth",data:getJSON(e),dataType:"json",contentType:"application/json"})},loginWithFacebook:function(e){return $.ajax({method:"POST",url:"/auth/facebook",data:getJSON(e),dataType:"json",contentType:"application/json"})},loginWithGoogle:function(e){return $.ajax({method:"POST",url:"/auth/google",data:getJSON(e),dataType:"json",contentType:"application/json"})},signupWithPassword:function(e){return $.ajax({method:"POST",url:"/auth/new",data:getJSON(e),dataType:"json",contentType:"application/json"})},initExamsForUser:function(e){return $.ajax({method:"POST",url:"/auth/initSubscribe",data:getJSON(e),dataType:"json",contentType:"application/json"})}};window.getSlugService=getSlugService;var tagMapping={"72975611-4a5e-11e5-a83f-8b51c790d8b8":"Exam_Bank-PO","e9c196a1-4ae6-11e5-bc68-8620ffdeb79c":"Exam_SSC","65c13275-0ae6-11e6-ae99-33bf931174b5":"Exam_UPSC","110cb1ef-1b58-11e6-b15e-5ec045512968":"Exam_CAT","45731551-d7aa-11e5-9ee9-b3a0ca6334c1":"Exam_JEE","b127f550-7d66-11e5-92f9-06c62b029f94":"Exam_GATECS","9ee27bc3-7ca8-11e5-8e90-6d1752ad4c7c":"Exam_GATEEE","b695e1a4-7d66-11e5-aecf-2db16c0d7a4b":"Exam_GATEECE","bb109455-7d66-11e5-84b7-ca8078d11aa6":"Exam_GATEME","8223ff18-d538-11e5-80ff-b0086ec8f4cd":"Exam_GATECE","aa14e1ec-5ad4-11e5-a9f6-d133ce302c8b":"Exam_CTET"};window.getExamTag=function(e){if(e){var t=tagMapping[e.id];return t||(t="Exam_"+e.name.replace(/&|\s/g,"")),t}};//# sourceMappingURL=common-1758ca9dd7.js.map
