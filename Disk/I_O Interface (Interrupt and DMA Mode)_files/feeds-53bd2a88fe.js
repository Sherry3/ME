"use strict";+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==e.style[o])return{end:t[o]};return!1}e.fn.emulateTransitionEnd=function(t){var o=!1,s=this;e(this).one("bsTransitionEnd",function(){o=!0});var a=function(){o||e(s).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(e){function t(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=e(document),this._$window=e(window),this._$body=e(document.body),this._boundClick=e.proxy(this._clickHandler,this)}function o(t){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null,this._targetImage=t,this._$body=e(document.body)}t.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',e.proxy(this._zoom,this))},t.prototype._zoom=function(t){var s=t.target;if(s&&"IMG"==s.tagName&&!this._$body.hasClass("zoom-overlay-open"))return t.metaKey||t.ctrlKey?window.open(t.target.getAttribute("data-original")||t.target.src,"_blank"):void(s.width>=e(window).width()-o.OFFSET||(this._activeZoomClose(!0),this._activeZoom=new o(s),this._activeZoom.zoomImage(),this._$window.on("scroll.zoom",e.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",e.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",e.proxy(this._touchStart,this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in t?t.bubbles&&t.stopPropagation():t.cancelBubble=!0))},t.prototype._activeZoomClose=function(e){this._activeZoom&&(e?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)},t.prototype._scrollHandler=function(t){null===this._initialScrollPosition&&(this._initialScrollPosition=e(window).scrollTop());var o=this._initialScrollPosition-e(window).scrollTop();Math.abs(o)>=40&&this._activeZoomClose()},t.prototype._keyHandler=function(e){27==e.keyCode&&this._activeZoomClose()},t.prototype._clickHandler=function(e){e.preventDefault?e.preventDefault():event.returnValue=!1,"bubbles"in e?e.bubbles&&e.stopPropagation():e.cancelBubble=!0,this._activeZoomClose()},t.prototype._touchStart=function(t){this._initialTouchPosition=t.originalEvent.touches[0].pageY,e(t.target).on("touchmove.zoom",e.proxy(this._touchMove,this))},t.prototype._touchMove=function(t){Math.abs(t.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),e(t.target).off("touchmove.zoom"))},o.OFFSET=80,o._MAX_WIDTH=2560,o._MAX_HEIGHT=4096,o.prototype.zoomImage=function(){var t=document.createElement("img");t.onload=e.proxy(function(){this._fullHeight=Number(t.height),this._fullWidth=Number(t.width),this._zoomOriginal()},this),t.src=this._targetImage.src},o.prototype._zoomOriginal=function(){this._targetImageWrap=document.createElement("div"),this._targetImageWrap.className="zoom-img-wrap",this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage),this._targetImageWrap.appendChild(this._targetImage),e(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out"),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",document.body.appendChild(this._overlay),this._calculateZoom(),this._triggerAnimation()},o.prototype._calculateZoom=function(){this._targetImage.offsetWidth;var t=this._fullWidth,s=this._fullHeight,a=(e(window).scrollTop(),t/this._targetImage.width),n=e(window).height()-o.OFFSET,i=e(window).width()-o.OFFSET,r=t/s,p=i/n;t<i&&s<n?this._imgScaleFactor=a:r<p?this._imgScaleFactor=n/s*a:this._imgScaleFactor=i/t*a},o.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var t=e(this._targetImage).offset(),o=e(window).scrollTop(),s=o+e(window).height()/2,a=e(window).width()/2,n=t.top+this._targetImage.height/2,i=t.left+this._targetImage.width/2;this._translateY=s-n,this._translateX=a-i;var r="scale("+this._imgScaleFactor+")",p="translate("+this._translateX+"px, "+this._translateY+"px)";e.support.transition&&(p+=" translateZ(0)"),e(this._targetImage).css({"-webkit-transform":r,"-ms-transform":r,transform:r}),e(this._targetImageWrap).css({"-webkit-transform":p,"-ms-transform":p,transform:p}),this._$body.addClass("zoom-overlay-open")},o.prototype.close=function(){return this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),e(this._targetImage).css({"-webkit-transform":"","-ms-transform":"",transform:""}),e(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""}),e.support.transition?void e(this._targetImage).one(e.support.transition.end,e.proxy(this.dispose,this)).emulateTransitionEnd(300):this.dispose()},o.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(e(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))},e(function(){(new t).listen()})}(jQuery),function(){var e=document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var videos=function(e){function t(e,t){"undefined"!=typeof YT&&a.push(new YT.Player(e,t))}function o(){a=[]}function s(){e.each(a,function(e,t){t.getPlayerState&&1===t.getPlayerState()&&t.pauseVideo()})}var a=[];return{addVideo:t,pauseAllVideos:s,empty:o}}(jQuery);!function(){function e(e){e=e&&e instanceof Array&&e.length>0?e:[];var t=[];return e.reduce(function(e,o){return"shared"===o.posttype&&o.metadata&&(o.sharedDetails=!0,o.sharedData={authorid:o.authorid,authorname:o.authorname,authorpic:o.authorpic,postid:o.postid,groupname:o.groupname},Object.assign(o,o.metadata)),e.hasOwnProperty(o.postid)||(t.push(o),e[o.postid]=o,o.sharedDetails?ke.postIds.push(o.sharedData.postid):ke.postIds.push(o.postid)),e},ke.posts),t}function t(e){ve[e]={autoComment:!1,commentUserMentions:{userList:[]},metadata:{imageAspectRatio:"0.0",imageWidth:"0"}}}function o(e,t){xe[e]={isHidden:!1,commentid:e,postid:t,meta:{imageAspectRatio:"0.0",imageWidth:"0"}}}function s(e){var o=$(this),s=o.closest(".post"),a=o.closest(".post__comment-create"),i=$(this).closest(".ajax-image-upload-container").find(".post__comment-image-prev.ajax-image-upload-prev"),r=s.attr("data-id"),p={height:"20px",width:"20px"};ve[r]||t(r),ve[r].metadata&&ve[r].metadata.imageURL&&""!=ve[r].metadata.imageURL.trim()?ve[r].commentType="image":ve[r].commentType="text";var l=$(this).parent().find("textarea"),c=s.find(".post__comments");ve[r].groupId=s.attr("data-groupId"),ve[r].postId=s.attr("data-id"),ve[r].commentData=l.val().replace(/(\n){1,}/g,"<br>"),ve[r].commentData&&(showLoader(a,p),n(ve[r]).then(function(e){o.removeClass("js-submit-comment");var t;t="poll"===e.commenttype?ae(e):se(e),c.append(t),S(),l.val(""),i.find("img").attr("src",""),i.find(".image-link").attr("href",""),i.addClass("hidden");var a=$(i).closest(".ajax-image-upload-container").find(".post__comment-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file");1===a.length&&a.val("");var n=s.find(".post__comments-count"),p=parseInt(n.html())+1;n.html(p+(1===p?" comment":" comments")),delete ve[r]}).fail(function(e){console.log(e),o.removeClass("js-submit-comment"),406===e.errorCode&&openModal(getAlreadyVerifedMobileHtml(e),"popup")}).always(function(){hideLoader(a)}))}function a(e){var t=$(this),s=t.closest(".post__comment"),a=t.closest(".post__reply-create"),n=$(this).closest(".ajax-image-upload-container").find(".post__reply-image-prev.ajax-image-upload-prev"),r=s.attr("data-comment-id"),p=s.closest(".post").attr("data-id"),l={height:"20px",width:"20px"};xe[r]||o(r,p),xe[r].meta&&xe[r].meta.imageURL&&""!=xe[r].meta.imageURL.trim()?xe[r].type="image":xe[r].type="text";var c=$(this).parent().find("textarea");xe[r].data=c.val().replace(/(\n){1,}/g,"<br>"),xe[r].data&&(showLoader(a,l),i(xe[r]).then(function(e){t.removeClass("js-submit-reply");var o;o="poll"===e.type?ie(e):ne(e);var a=s.find(".post__replies");a.append(o),S(),c.val(""),n.find("img").attr("src",""),n.find(".image-link").attr("href",""),n.addClass("hidden");var i=$(n).closest(".ajax-image-upload-container").find(".post__reply-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file");1===i.length&&i.val("");var p=s.find(".post__comment__reply-count");p.html(parseInt(p.html())+1),delete xe[r]}).fail(function(e){console.log(e),t.removeClass("js-submit-reply"),406===e.errorCode&&openModal(getAlreadyVerifedMobileHtml(e),"popup")}).always(function(){hideLoader(a)}))}function n(e){return Ce.postComment(e).then(function(e){return e},function(e){return 403===e.status?verifyUserUsingAccKit():(createToast({closeButton:!0,message:e.responseJSON.message}),$.Deferred().reject(e))}).then(function(t){return t.error||t.status&&"error"===t.status?(createToast({closeButton:!0,message:t.msg||t.error}),406===t.errorCode?$.Deferred().reject(t):$.Deferred().reject(t)):t.commentid?t:Ce.postComment(e[commentId])})}function i(e){return Ce.postReply(e).then(function(e){return e},function(e){return 403===e.status?verifyUserUsingAccKit():(createToast({closeButton:!0,message:e.responseJSON.message}),$.Deferred().reject(e))}).then(function(t){return t.error||t.status&&"error"===t.status?(createToast({closeButton:!0,message:t.msg||t.error}),406===t.errorCode?$.Deferred().reject(t):$.Deferred().reject(t)):t.replyid?t:Ce.postReply(e[commentId])})}function r(e){var t=$(this).parent().find(".post__comment-create__btn"),o=$(this),s=o.val().trim();return s&&!t.hasClass("js-submit-comment")?void t.addClass("js-submit-comment"):s?void 0:void t.removeClass("js-submit-comment")}function p(e){var t=$(this).parent().find(".post__reply-create__btn"),o=$(this),s=o.val().trim();return s&&!t.hasClass("js-submit-reply")?void t.addClass("js-submit-reply"):s?void 0:void t.removeClass("js-submit-reply")}function l(e){var t=$($(this).parent().find(".post__comment")[0]),o=$(this).parent(),s=$(this),a={};a.postId=$(this).closest(".post").attr("data-id"),a.ref=t.attr("data-createdOn");var n=($(this).parent(),"");showLoader(o,{width:"20px",height:"20px"}),Ce.getCommentWRTCreatedOn(a).done(function(e){return 0===e.result.length?void s.remove():($.each(e.result,function(e,t){n+="poll"===t.commenttype?ae(t):se(t)}),s.after(n),S(),void(e.result.length<10&&s.remove()))}).fail(function(e){console.log(e)}).always(function(){hideLoader(o)})}function c(e){var t=$($(this).parent().find(".post__reply")[0]),o=$(this).parent(),s=$(this),a={};a.commentid=$(this).closest(".post__comment").attr("data-comment-id"),a.createdon=t.attr("data-createdon"),a.direction="prev",showLoader(o,{width:"20px",height:"20px"}),Ce.getReply(a).done(function(e){var t="",o=0;e.data&&e.data.length?($.each(e.data,function(e,s){s.isDeleted||(t+="poll"===s.type?ie(s):ne(s),o++)}),s.after(t),S(),e.data.length<=9&&s.remove()):s.remove()}).fail(function(e){console.log(e)}).always(function(){hideLoader(o)})}function d(e){var t=$(this).closest(".post");showLoader(t);var o,s=t.find(".post__comment-create"),a=t.find(".post__comment--top-comment");if(a.length&&(o=a.attr("data-comment-id")),$(".post__comments").parent().hasClass("hidden")&&$(".post__comments").parent().removeClass("hidden"),s.length>0){var n=s.offset().top-250;return $("body, html").animate({scrollTop:n},500,function(){s.find("textarea").focus()}),void hideLoader(t)}var i=t.find(".post__comments"),r={postId:t.attr("data-id")},p="";Ce.getCommentWRTCreatedOn(r).then(function(e){if(e.error)return $.Deferred().reject(e);if(e.result.length<e.commentCount&&(p+='<a class="post__load-more-comments-btn js-load-previous-comments">Load previous comments</a>'),$.each(e.result,function(e,t){p+="poll"===t.commenttype?ae(t):se(t)}),i.html(p),t.append(re()),S(),o){var s=t.find(".post__comment[data-comment-id="+o+"]");if(1===s.length){s.css("background-color","#dcf4e7");var a=s.offset().top-140;$("body, html").animate({scrollTop:a},500),setTimeout(function(){s.removeAttr("style")},2e3)}}}).fail(function(e){console.log(e)}).always(function(){hideLoader(t)})}function m(e){var t=$(this).closest(".post__comment"),o=t.attr("data-comment-id");showLoader(t);var s=t.find(".post__comment-reply"),a=s.find(".post__reply-create");if(s.children().length){if(1===a.length){var n=a.offset().top-250;$("body, html").animate({scrollTop:n},500,function(){s.find("textarea").focus()})}else s.find("textarea").focus();hideLoader(t)}else if(o){var i={commentid:o,direction:"prev",createdon:0};Ce.getReply(i).done(function(e){var n="";if(e.data&&e.data.length?($.each(e.data,function(e,t){t.isDeleted||(n+="poll"===t.type?ie(t):ne(t))}),n='<div class="post__replies">'+(e.data.length>9?'<a class="post__load-more-replies-btn js-load-previous-replies">Load previous replies</a>':"")+n+"</div>"):n='<div class="post__replies"></div>',t.find(".post__comment-reply").prepend(n),s.append(re(!0,o)),S(),t.addClass("post__comment--reply-open"),1===a.length){var i=a.offset().top-250;$("body, html").animate({scrollTop:i},500,function(){s.find("textarea").focus()})}else s.find("textarea").focus()}).fail(function(e){console.log(e)}).always(function(){hideLoader(t)})}else hideLoader(t)}function u(e){function t(){o.removeClass("js-un-upvote-post post__upvoted"),o.addClass("js-upvote-post"),o.attr("data-upvote-count",n),i.find("span").text(n)}var o=$(this),s=$(this).closest(".post"),a=s.attr("data-id"),n=+o.attr("data-upvote-count"),i=s.find(".post__upvotes-count");o.addClass("js-un-upvote-post post__upvoted"),o.removeClass("js-upvote-post"),o.attr("data-upvote-count",n+1),i.find("span").text(n+1),Ce.likePost({postId:a}).then(function(e){if(0===e||e.error)return $.Deferred().reject(e)}).fail(function(e){console.log(e),t()})}function h(e){function t(){o.removeClass("js-un-upvote-comment post__comment--upvoted"),o.addClass("js-upvote-comment"),o.attr("data-upvote-count",n),i.text(n)}var o=$(this),s=$(this).closest(".post__comment"),a=s.attr("data-comment-id"),n=+o.attr("data-upvote-count"),i=$(this).parent().find(".post__comment__upvote-count");o.addClass("js-un-upvote-comment post__comment--upvoted"),o.removeClass("js-upvote-comment"),o.attr("data-upvote-count",n+1),i.text(n+1),Ce.likeComment({commentId:a}).done(function(e){0===e&&t()}).fail(function(e){t()})}function g(e){function t(){o.removeClass("js-un-upvote-reply post__reply--upvoted"),o.addClass("js-upvote-reply"),o.attr("data-upvote-count",n),i.text(n)}var o=$(this),s=$(this).closest(".post__reply"),a=s.attr("data-reply-id"),n=+o.attr("data-upvote-count"),i=$(this).parent().find(".post__reply__upvote-count");o.addClass("js-un-upvote-reply post__reply--upvoted"),o.removeClass("js-upvote-reply"),o.attr("data-upvote-count",n+1),i.text(n+1),Ce.likeReply({replyId:a}).done(function(e){e.status&&t()}).fail(function(e){t()})}function f(e){function t(){o.removeClass("js-upvote-post"),o.addClass("js-un-upvote-post post__upvoted"),o.attr("data-upvote-count",i),n.find("span").text(i)}var o=$(this),s=$(this).closest(".post"),a=s.attr("data-id"),n=s.find(".post__upvotes-count"),i=+o.attr("data-upvote-count");o.addClass("js-upvote-post"),o.removeClass("js-un-upvote-post post__upvoted"),o.attr("data-upvote-count",i-1),n.find("span").text(i-1),Ce.likePost({postId:a}).done(function(e){0===e&&t()}).fail(function(e){t()})}function v(e){function t(){o.removeClass("js-upvote-comment"),o.addClass("js-un-upvote-comment post__comment--upvoted"),o.attr("data-upvote-count",n),i.text(n)}var o=$(this),s=$(this).closest(".post__comment"),a=s.attr("data-comment-id"),n=+o.attr("data-upvote-count"),i=$(this).parent().find(".post__comment__upvote-count");o.addClass("js-upvote-comment"),o.removeClass("js-un-upvote-comment post__comment--upvoted"),o.attr("data-upvote-count",n-1),i.text(n-1),Ce.likeComment({commentId:a}).done(function(e){0===e&&t()}).fail(function(e){t()})}function x(e){function t(){o.removeClass("js-upvote-reply"),o.addClass("js-un-upvote-reply post__reply--upvoted"),o.attr("data-upvote-count",n),i.text(n)}var o=$(this),s=$(this).closest(".post__reply"),a=s.attr("data-reply-id"),n=+o.attr("data-upvote-count"),i=$(this).parent().find(".post__reply__upvote-count");o.addClass("js-upvote-reply"),o.removeClass("js-un-upvote-reply post__reply--upvoted"),o.attr("data-upvote-count",n-1),i.text(n-1),Ce.unlikeReply({replyId:a}).done(function(e){e.status&&t()}).fail(function(e){t()})}function _(e){var t,o,s,a=$(this),n={},i=$(this).closest(".js-submit-poll").attr("data-poll-comment"),r=$(this).closest(".js-submit-poll").attr("data-poll-reply");r?(t=$(this).closest(".post__reply"),o=t.find(".post__reply__poll-attempts"),s=t.attr("data-id")):i?(t=$(this).closest(".post__comment"),o=t.find(".post__comment__poll-attempts"),s=t.attr("data-id")):(t=$(this).closest(".post"),o=t.find(".post__prop .post__attempt-count"),s=t.attr("data-id"));var p=a.parent("li").index(),l=$(this).closest(".post__poll-options"),c=+l.attr("data-total-poll-attempts");n.totalAttempts=c;var d=+(l.attr("data-correct-option-index")||-1),m=void 0!==d&&!isNaN(d)&&"number"==typeof d&&d>=0;isNaN(c)||(c+=1,n.choices=[],l.find(".post__poll-option a").each(function(e,t){var o=$(t),s="",a=+o.attr("data-chosen-count")||0;n.choices.push({chosenCount:a}),e===p&&(a+=1,m?d!==p&&m&&(s="post__poll-option--incorrect"):s="post__poll-option--selected"),e===d&&m&&(s="post__poll-option--correct"),o.parent().addClass(s);var i=Math.round10(a/c*100,-2);m||o.find(".post__poll-chosen-percent").text(Math.round(i)+" %"),o.find(".post__poll-highlight-bar").css({transform:"translateX("+(i-100)+"%)"}),o.attr("data-chosen-count",a)}),l.attr("data-total-poll-attempts",c),o.html("<span>"+c+"</span>"+(1!=c?" attempts":" attempt")),l.removeClass("js-submit-poll"),Ce.submitPoll({postId:s,optionTapped:p}).then(function(e){if(e.error)return $.Deferred().reject(e);var t=ke.posts[s]&&ke.posts[s].subj||{};gaPush({eventCategory:"Question Attempted",eventAction:"1",eventLabel:Object.keys(t)>0?t[Object.keys(t)[0]]:""})}).fail(function(e){console.log(e),l.attr("data-total-poll-attempts",n.totalAttempts),c=n.totalAttempts,r?t.find(".post__reply__poll-attempts").html("<span>"+c+"</span>"+(1!=c?" attempts":" attempt")):i?t.find(".post__comment__poll-attempts").html("<span>"+c+"</span>"+(1!=c?" attempts":" attempt")):t.find(".post__prop .post__attempt-count").html(c+(1!=c?" attempts":" attempt")),l.find(".post__poll-option a").each(function(e,t){var o=$(t);o.attr("data-chosen-count",n.choices[e].chosenCount),o.parent().removeClass("post__poll-option--selected post__poll-option--incorrect post__poll-option--correct"),o.find(".post__poll-highlight-bar").css({transform:"translateX(-100%)"}),o.find(".post__poll-chosen-percent").text("")}),l.addClass("js-submit-poll")}))}function w(e){$(this).closest(".post__comments")}function y(e){e=e||{};var t=e.feeds,o="";return $.each(t,function(e,t){var s;t.sharedDetails&&(s='<div class="post__shared-details flex-box"><span><a href="'+le(t.sharedData.authorname,t.sharedData.authorid)+'">'+t.sharedData.authorname+" </a>shared post "+(t.sharedData.groupname?"in "+t.sharedData.groupname:"")+"</span></div>"),"text"!==t.posttype&&"article"!==t.posttype||("doubt"===t.posttext.subCategory&&(o+=j(t,s)),"studyTips"===t.posttext.subCategory&&(o+=I(t,s))),"poll"===t.posttype&&(o+=C(t,s)),"test"===t.posttype&&(o+=P(t,s))}),o}function b(e){e=e||{};var t="";t+='<div class="card u-padding-bottom-large box-shadow flex-box flex-column safed-bg"><h1>Info</h1>',t+='<div class="flex-box flex-row">',t+='<div class="mentor-info flex-box flex-row">',t+='<svg class="briefcase-icon" height="34" version="1.1" viewbox="0 0 36 36" width="34" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#briefcase-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg>',t+='<p><span class="bold-font dark-grey">Active Since</span><br><span class="light-grey s-16">'+getShowTime(Number(e.createdon),!0)+"</span></p>",t+="</div>",t+='<div class="mentor-info flex-box flex-row">',t+='<svg class="answered-icon" height="34" version="1.1" viewbox="0 0 36 36" width="34" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#answered-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg>',t+='<p><span class="bold-font dark-grey">Queries Answered</span><br><span class="light-grey s-16">'+(e.queryAnsweredCount||0)+"</span></p>",t+="</div>",t+="</div>";var o=[],s=e.usermeta&&e.usermeta.mentorInfo?JSON.parse(e.usermeta.mentorInfo):{};if(e.exam&&s.examIds&&$.each(s.examIds,function(t,s){e.exam[s]&&o.push(e.exam[s])}),t+='<div class="mentor-info flex-box flex-row">',t+='<svg class="exam-category-icon" height="34" version="1.1" viewbox="0 0 36 36" width="34" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#exam-category-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg>',t+='<p><span class="bold-font dark-grey">Exam Category</span><br><span class="light-grey s-16">'+(o.join(", ")||"-")+"</span></p>",t+="</div>",t+='<div class="mentor-info flex-box flex-row">',t+='<svg class="highlights-icon" height="34" version="1.1" viewbox="0 0 36 36" width="34" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#highlights-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg>',t+='<p><span class="bold-font dark-grey">Highlights</span><br><span class="light-grey s-16">'+(s.mentorUsp||"")+"</span></p>",t+="</div>",t+="</div>",e.videos&&e.videos.length){t+='<div class="card u-padding-bottom-large box-shadow flex-box flex-column safed-bg">',t+='<div class="flex-box flex-row flex-box-items-center"><h1 class="u-flex-grow card__title">Videos</h1>';var a=getSlugService().slugifyUser(e.username,e.userid);a=a.split("/"),t+=e.videos.length>2?'<a href="/user/video-tutorials/'+a[2]+'">View All</a>':"",t+="</div>",t+='<div class="flex-box flex-row flex-box-wrap">';var n=getSlugService(),i=e.videos.slice(0,2);$.each(i,function(e,o){var s="object"!=typeof o.posttext?parseJSON(o.posttext):o.posttext,a="object"!=typeof s.videoData?parseJSON(s.videoData):s.videoData;t+='<a href="/'+n.slugifyPost(o)+'" class="post-card-article flex-box flex-column">';var i=s.imageURL||(a.videoThumbnail?a.videoThumbnail:"");t+='<div class="youtube-video"><img style="margin: 0" class="post-card-article__img" src="'+i+'"/><div class="play" style="background-size: 50px;"></div></div>',t+='<div class="post-card-article__content flex-box flex-column">',t+='<h3 class="post-card-article__title post-card-article__title--overflow">'+s.title+"</h3>",t+="</div>",t+="</a>"}),t+="</div>",t+="</div>"}return e.studyMaterial&&e.studyMaterial.length&&(t+='<div class="card u-padding-bottom-large box-shadow flex-box flex-column safed-bg">',t+='<div class="flex-box flex-row"><h1 class="card__title">Study Material</h1></div>',t+='<div class="flex-box flex-column light-grey mentor-studyMaterialList">',$.each(e.studyMaterial,function(e,o){t+='<li class="flex-box flex-row mentor-studyMaterialList__item">',t+='<a href="/'+o.url+'" class="u-flex-grow">'+o.title+"</a>",t+='<svg version="1.1" width="15" height="15" x="0" y="0" viewbox="0 0 30 48"><use xlink:href="/svg/common-icons-sprite.svg#arrow-icon"></use></svg>',t+="</li>"}),t+="</div>",t+="</div>"),t}function k(e,t,o){if(e=e||"",t=t||{},o=o||"",t.appendContent)return he.find(".js-feeds").append(e),void S();var s=$(".js-mentor-info");s.length&&s.html(o),he.find(".js-feeds").html(e),S()}function j(e,t){var o=le(e.authorname,e.authorid),s='<article class="post box-shadow ajax-image-upload-container post--query" data-id="'+e.postid+'" data-groupId="'+e.groupid+'"> ';if(s+=t?t:"",s+=' <div class="post__head flex-box flex-row">',s+='<a class="post__user-profile-pic" href="'+o+'" style="background: #ebebeb url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',s+='<div class="bundle u-flex-grow">',s+='<a href="'+o+'" class="post__user-name',s+=e.flags&&e.flags.isMentor?' flex-box flex-row"><span>'+(e.authorname||"")+'</span><span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span></a>':'">'+(e.authorname||"")+"</a>",s+='<p class="post__info">  <span class="post__type">Query</span> <span class="post__date">'+getShowTime(e.createdon)+"</span>",e.location&&(s+='<span class="post__location">'+e.location+"</span>"),s+="</p> </div>",e.spam||e.reported||(s+='<div class="bookmark-post"><svg class="bookmark-icon bookmark-heading-icon '+(e.isbookmarkedbyme?"bookmarked js-delete-bookmark":"js-create-bookmark")+'" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div>'),s+=" </div>",e.spam)s+=R(2);else if(e.reported)s+=R(1);else{s+='<div class="post__content">';var a=!1;e.posttext&&e.posttext.videoData&&(a=!0,s+=T(e.posttext.videoData));var n=$("<div></div>").html(e.posttext.postText),i=ue(n.html()),r="relative content-box";if(n.text().length>me(i)&&(r+=" read-more js-read-more"),s+='<p class="'+r+'">'+i+"</p>",e.posttext.imageURL&&!a){e.posttext.imageAspectRatio=e.posttext.imageAspectRatio||1,e.posttext.imageWidth=e.posttext.imageWidth||620;var p=ce({imageAspectRatio:e.posttext.imageAspectRatio,imageWidth:e.posttext.imageWidth});s+='<div class="post__content__img" style="width:'+p.width+"px;height:"+p.height+'px;""><img src="'+e.posttext.imageURL+'" width="'+p.width+'px" height="'+p.height+'px" data-action="zoom"></div>'}s+="</div>",s+='<ul class="post__prop"> <li class="post__upvotes-count"><span>'+(e.likecount||0)+'</span> upvotes</li> <li class="post__comments-count">'+(e.commentcount||0)+" "+(1===e.commentcount?"comment":"comments")+"</li> </ul>";var l={upvoteCount:e.likecount,isLikedByMe:e.islikedbyme,upvoteClass:"js-upvote-post",unUpvoteClass:"js-un-upvote-post post__upvoted",isbookmarkedbyme:e.isbookmarkedbyme,authorid:e.authorid,followed:e.followed,post:e};s+=E(l),s+='<div class="post__comments">',e.topcommentid&&(s+=oe({topcommentauthorname:e.topcommentauthorname,topcommentauthorpic:e.topcommentauthorpic,topcommentcreationdate:e.topcommentcreationdate,topcommentdata:e.topcommentdata,topcommentid:e.topcommentid,topcommenttype:e.topcommenttype,topcommentbymentor:Boolean(e.flags&&e.flags.isTopCommentByMentor)})),s+="</div>"}return s+="</article>"}function I(e,t){var o=le(e.authorname,e.authorid),s='<article class="post box-shadow ajax-image-upload-container post--shared-info" data-id="'+e.postid+'" data-groupId="'+e.groupid+'"> ';if(s+=t?t:"",s+=' <div class="post__head flex-box flex-row">',s+='<a class="post__user-profile-pic" href="'+o+'" style="background: #ebebeb url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',s+='<div class="bundle u-flex-grow">',s+='<a href="'+o+'" class="post__user-name',s+=e.flags&&e.flags.isMentor?' flex-box flex-row"><span>'+(e.authorname||"")+'</span><span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span></a>':'">'+(e.authorname||"")+"</a>",s+='<p class="post__info">  <span class="post__type">Shared Info</span> <span class="post__date">'+getShowTime(e.createdon)+"</span>",e.location&&(s+='<span class="post__location">'+e.location+"</span>"),s+="</p> </div>",e.spam||e.reported||(s+='<div class="bookmark-post"><svg class="bookmark-icon bookmark-heading-icon '+(e.isbookmarkedbyme?"bookmarked js-delete-bookmark":"js-create-bookmark")+'" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div>'),s+=" </div>",e.spam)s+=R(2);else if(e.reported)s+=R(1);else{s+='<div class="post__content">';var a="";"article"===e.posttype&&(a="/"+pe(e));var n=!1;e.posttext&&e.posttext.videoData&&(n=!0,s+="article"!==e.posttype?T(e.posttext.videoData):'<a href="'+a+'" class="youtube-video"><img src="https://i.ytimg.com/vi/'+e.posttext.videoData.videoId+'/hqdefault.jpg"><div class="play"></div><div class="youtube-video__caption"><p class="youtube-video__title">'+(e.posttext.videoData.videoTitle||"")+'</p><p class="youtube-video__src"><small>www.youtube.com</small></p></div></a>');var i=e.posttext.postText||"",r=$("<div></div>").html(i),p=ue(r.html());if("article"!==e.posttype){var l="relative content-box";r.text().length>me(p)&&(l+=" read-more js-read-more"),s+='<p class="'+l+'">'+p+"</p>"}if(e.posttext.imageURL&&!n){e.posttext.imageAspectRatio=e.posttext.imageAspectRatio||1,e.posttext.imageWidth=e.posttext.imageWidth||620;var c=ce({imageAspectRatio:e.posttext.imageAspectRatio,imageWidth:e.posttext.imageWidth});s+='<div class="post__content__img" style="width:'+c.width+"px;height:"+c.height+'px;"">',"article"!==e.posttype?(s+='<img src="'+e.posttext.imageURL+'" width="'+c.width+'px" height="'+c.height+'px"',s+=' data-action="zoom" >'):s+='<a href="'+a+'" class="post__link"><img src="'+e.posttext.imageURL+'" width="'+c.width+'px" height="'+c.height+'px"></a>',s+="</div>"}"article"===e.posttype&&(i=e.posttext.title||"",s+='<p class="post__title"><a href="'+a+'" class="post__link">'+i+"</a></p>"),s+=" </div>",s+='<ul class="post__prop"> <li class="post__upvotes-count"><span>'+(e.likecount||0)+'</span> upvotes</li> <li class="post__comments-count">'+(e.commentcount||0)+" "+(1===e.commentcount?"comment":"comments")+"</li> </ul>";var d={upvoteCount:e.likecount,isLikedByMe:e.islikedbyme,upvoteClass:"js-upvote-post",unUpvoteClass:"js-un-upvote-post post__upvoted",isbookmarkedbyme:e.isbookmarkedbyme,authorid:e.authorid,followed:e.followed,post:e};s+=E(d),s+='<div class="post__comments">',e.topcommentid&&(s+=oe({topcommentauthorname:e.topcommentauthorname,topcommentauthorpic:e.topcommentauthorpic,topcommentcreationdate:e.topcommentcreationdate,topcommentdata:e.topcommentdata,topcommentid:e.topcommentid,topcommenttype:e.topcommenttype,topcommentbymentor:Boolean(e.flags&&e.flags.isTopCommentByMentor)})),s+="</div>"}return s+="</article>"}function C(e,t){var o=le(e.authorname,e.authorid),s=-1,a=Number(e.posttext.correctOptionIndex),n=!1,i='<article class="post box-shadow ajax-image-upload-container post--poll" data-id="'+e.postid+'" data-groupId="'+e.groupid+'"> ';if(i+=t?t:"",i+=' <div class="post__head flex-box flex-row">',i+='<a class="post__user-profile-pic" href="'+o+'" style="background: #ebebeb url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',i+='<div class="bundle u-flex-grow">',i+='<a href="'+o+'" class="post__user-name',i+=e.flags&&e.flags.isMentor?' flex-box flex-row"><span>'+(e.authorname||"")+'</span><span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span></a>':'">'+(e.authorname||"")+"</a>",
i+='<p class="post__info">  <span class="post__type ">MCQ</span> <span class="post__date">'+getShowTime(e.createdon)+"</span>",e.location&&(i+='<span class="post__location">'+e.location+"</span>"),i+="</p> </div>",e.spam||e.reported||(i+='<div class="bookmark-post"><svg class="bookmark-icon bookmark-heading-icon '+(e.isbookmarkedbyme?"bookmarked js-delete-bookmark":"js-create-bookmark")+'" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div>'),i+=" </div>",e.spam)i+=R(2);else if(e.reported)i+=R(1);else{i+='<div class="post__content">';var r=!1;e.posttext&&e.posttext.videoData&&(r=!0,i+=T(e.posttext.videoData));var p=$("<div></div>").html(e.posttext.content),l=ue(p.html()),c="relative content-box";if(p.text().length>me(l)&&(c+=" read-more js-read-more"),i+='<p class="'+c+'">'+l+"</p>",e.submitted&&(s=Number(e.submitted.optionSelected),n=Number(e.posttext.correctOptionIndex)>-1),e.posttext.imageURL&&!r){e.posttext.imageAspectRatio=e.posttext.imageAspectRatio||1,e.posttext.imageWidth=e.posttext.imageWidth||620;var d=ce({imageAspectRatio:e.posttext.imageAspectRatio,imageWidth:e.posttext.imageWidth});i+='<div class="post__content__img" style="width:'+d.width+"px;height:"+d.height+'px;""><img src="'+e.posttext.imageURL+'" width="'+d.width+'px" height="'+d.height+'px" data-action="zoom"></div>'}var m=0;e.polldata&&e.polldata instanceof Array&&(m=e.polldata.reduce(function(e,t){return e+ +t.attemptNum},0)),i+='<ul class="post__poll-options '+(s===-1?"js-submit-poll":"")+'" data-correct-option-index="'+Number(e.posttext.correctOptionIndex)+'" data-total-poll-attempts="'+m+'">';var u=e.posttext.choices,h=[];if(e.polldata&&e.polldata instanceof Array)var h=e.polldata.reduce(function(e,t){return e[t.optionKey]=t,e},{});var g="A";u&&u instanceof Array&&$.each(u,function(e,t){var o="";s>-1&&(e===s&&(n?a!==e&&n&&(o="post__poll-option--incorrect"):o="post__poll-option--selected"),e===a&&n&&(o="post__poll-option--correct")),i+='<li class="post__poll-option '+o+'">';var r=h[e]&&h[e].attemptNum||0,p=m?Math.round10(r/m*100,-2):0;i+='<a class="flex-box flex-row" data-chosen-count="'+r+'">',i+='<span class="post__poll-option__label flex-box flex-row">'+g+"</span>",i+='<span class="post__poll-option__text">'+$("<div></div>").html(t).html()+"</span>",i+=s>-1?'<span class="post__poll-highlight-bar" style="transform: translateX('+(p-100)+'%);"></span><span class="post__poll-chosen-percent">'+(n?"":Math.round(p)+"%")+"</span>":'<span class="post__poll-highlight-bar"></span><span class="post__poll-chosen-percent"></span>',i+="</a></li>",g=String.fromCharCode(g.charCodeAt(0)+1)}),i+="</ul></div>",i+='<ul class="post__prop"> <li class="post__attempt-count"><span>'+(m||0)+"</span> "+(1!=m?" attempts":" attempt")+'</li><li class="post__upvotes-count"><span>'+(e.likecount||0)+'</span> upvotes</li> <li class="post__comments-count">'+(e.commentcount||0)+" "+(1===e.commentcount?"comment":"comments")+"</li></ul>";var f={upvoteCount:e.likecount,isLikedByMe:e.islikedbyme,upvoteClass:"js-upvote-post",unUpvoteClass:"js-un-upvote-post post__upvoted",isbookmarkedbyme:e.isbookmarkedbyme,authorid:e.authorid,followed:e.followed,post:e};i+=E(f),i+='<div class="post__comments">',e.topcommentid&&(i+=oe({topcommentauthorname:e.topcommentauthorname,topcommentauthorpic:e.topcommentauthorpic,topcommentcreationdate:e.topcommentcreationdate,topcommentdata:e.topcommentdata,topcommentid:e.topcommentid,topcommenttype:e.topcommenttype,topcommentbymentor:Boolean(e.flags&&e.flags.isTopCommentByMentor)})),i+="</div>"}return i+="</article>"}function T(e){return e=e||{},'<div class="youtube-player" data-id="'+(e.videoId||"")+'" data-title="'+(e.videoTitle||"")+'" data-channel-title="'+(e.channelTitle||"")+'"></div>'}function S(){var e=$(".youtube-player");$.each(e,function(e,t){t=$(t);var o="";if(""===t.html()){var s=t.attr("data-id")||"",a=t.attr("data-title");o+='<div class="youtube-video js-youtube-video" data-id="'+s+'">',o+='<img src="https://i.ytimg.com/vi/'+s+'/hqdefault.jpg">',o+='<div class="play"></div>',a&&(o+='<div class="youtube-video__caption"><p class="youtube-video__title">'+a+'</p><p class="youtube-video__src"><small>www.youtube.com</small></p></div>'),o+="</div>"}t.append(o)})}function O(e){var t=$('input[name="postType"]').val(),o=["article"];if(t&&o.indexOf(t)!==-1){var s=/^(?:https?:)?\/\/?(?:(?:www|m)\.)?(?:(?:youtube\.com|youtu.be))(?:\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/,a=e.filter(function(){return s.test(this.href)});$.each(a,function(e,t){var o=$(t).attr("href").match(s),a="";o&&o.length>0&&o[1]&&(a=o[1]),a&&($(t).before(T({videoId:a})),$(t).remove()),S()})}}function M(e){videos.pauseAllVideos();var t=$(this).attr("data-id");if(t){var o=$(this).height();$(this).parent().find("iframe")[0];videos.addVideo($(this)[0],{width:"100%",height:o+"px",videoId:t,events:{onReady:N},playerVars:{modestbranding:1}})}}function N(e){var t=$(e.target.a).parent();e.target.playVideo(),gaPush({event:"gaCustomEvent",eventCategory:"video-play",eventAction:t.attr("data-channel-title")||"",eventLabel:t.attr("data-id")||"",eventValue:1})}function P(e,t){var o=le(e.authorname,e.authorid),s='<article class="post box-shadow ajax-image-upload-container post--test" data-id="'+e.postid+'" data-groupId="'+e.groupid+'"> ';if(s+=t?t:"",s+=' <div class="post__head flex-box flex-row">',s+='<a class="post__user-profile-pic" href="'+o+'" style="background: #ebebeb url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',s+='<div class="bundle u-flex-grow">',s+='<a href="'+o+'" class="post__user-name',s+=e.flags&&e.flags.isMentor?' flex-box flex-row"><span>'+(e.authorname||"")+'</span><span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span></a>':'">'+(e.authorname||"")+"</a>",s+='<p class="post__info">  <span class="post__type">Quiz</span> <span class="post__date">'+getShowTime(e.createdon)+"</span>",e.location&&(s+='<span class="post__location">'+e.location+"</span>"),s+="</p> </div>",e.spam||e.reported||(s+='<div class="bookmark-post"><svg class="bookmark-icon bookmark-heading-icon '+(e.isbookmarkedbyme?"bookmarked js-delete-bookmark":"js-create-bookmark")+'" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div>'),s+=" </div>",e.spam)s+=R(2);else if(e.reported)s+=R(1);else{s+='<div class="post__content">';var a="/"+pe(e);if(s+='<div class="post__quiz-head">',e.submitted)s+='<div class="post__quiz-tick rocket-green-bg"><svg width="70px" height="50px" version="1.1" viewBox="0 0 32 24" width="15px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></div>',s+='<p class="post__quiz-msg rocket-green semi-bold-font">Quiz Completed!</p><p class="semi-bold-font">Your Score is</p>',s+='<p class="post__quiz-score google-red bold-font">'+Math.round10(e.submitted.score.score,-2)+" / "+e.submitted.score.maxScore+"</p>",s+='<a href="'+a+'" class="post__quiz-open-link">View result ></a>';else{s+='<div class="post__quiz-clock"><svg width="60" height="60" x="0" y="0" viewBox="0 0 56 56" xml:space="preserve" class="clock-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/clock-icon.svg#clock-icon"></use></svg></div>';var n="";e.subj&&Object.keys(e.subj).length>0&&(n=e.subj[Object.keys(e.subj)[0]]),s+='<p class="post__quiz-title">'+n+"</p>",s+='<ul class="post__quiz-info"><li>'+(e.posttext.totalQuestions||0)+" Questions</li><li>"+(e.posttext.timeLimit||0)+" Minutes</li></ul>",s+='<a href="'+a+'" class="post__quiz-open-btn rocket-green-bg">Start Quiz</a>'}s+="</div>",s+='<p class="post__title"><a href="'+a+'" class="post__link">'+(e.posttext.testName||"")+"</a></p>",e.submitted&&(s+='<p class="post__quiz-stat">'+(e.posttext.totalQuestions||0)+" Questions, "+(e.posttext.timeLimit||0)+" Minutes</p>"),s+="</div>",s+='<ul class="post__prop"> <li class="post__attempt-count"><span>'+(e.testattemptcount||0)+"</span>"+(1!=e.testattemptcount?" attempts":" attempt")+'</li> <li class="post__upvotes-count"><span>'+(e.likecount||0)+'</span> upvotes</li> <li class="post__comments-count">'+(e.commentcount||0)+" "+(1===e.commentcount?"comment":"comments")+"</li></ul>";var i={upvoteCount:e.likecount,isLikedByMe:e.islikedbyme,upvoteClass:"js-upvote-post",unUpvoteClass:"js-un-upvote-post post__upvoted",isbookmarkedbyme:e.isbookmarkedbyme,authorid:e.authorid,followed:e.followed,post:e};s+=E(i),s+='<div class="post__comments">',e.topcommentid&&(s+=oe({topcommentauthorname:e.topcommentauthorname,topcommentauthorpic:e.topcommentauthorpic,topcommentcreationdate:e.topcommentcreationdate,topcommentdata:e.topcommentdata,topcommentid:e.topcommentid,topcommenttype:e.topcommenttype,topcommentbymentor:Boolean(e.flags&&e.flags.isTopCommentByMentor)})),s+="</div>"}return s+="</article>"}function F(e){var t="";return $.each(e,function(e,o){var s=le(o.username,o.userid),a=o.userpic||"https://gs-post-images.grdp.co/2016/11/img1479294686367-58-rs.png";t+='<article class="user box-shadow">',t+='<div class="user__head flex-box flex-row">',t+='<a class="user__user-profile-pic" href="'+s+'" style="background: #ebebeb url('+a+') no-repeat center center;background-size:cover">',t+="</a>",t+='<div class="bundle u-flex-grow">',t+='<a href="'+s+'" class="user__user-name',t+=o.flags&&o.flags.isMentor?' flex-box flex-row"><span>'+(o.username||"")+'</span><span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span></a>':'">'+(o.username||"")+"</a>",t+="</div>",t+="</div>",t+="</article>"}),t}function A(e){var t="";return $.each(e,function(e,o){var s=o.grouppic||"https://gs-post-images.grdp.co/2016/11/img1479294686367-58-rs.png";if(t+='<article class="exam box-shadow">',t+='<div class="exam__head flex-box flex-row">',t+='<a class="exam__exam-pic" href="'+(o.slug?o.slug:"/")+'" style="background: #ebebeb url('+s+') no-repeat center center;background-size:cover">',t+="</a>",t+='<div class="bundle u-flex-grow">',t+='<a class="exam__exam-name" href="'+(o.slug?o.slug:"/")+'">'+o.groupname+"</a>",t+='<p class="exam__info">',t+="<span>"+(o.usercount>1e4?parseInt(o.usercount/1e3)+" K members":o.usercount+" members")+"</span>",t+="<span>"+(o.postcount>1e4?parseInt(o.postcount/1e3)+" K posts":o.postcount+" posts")+"</span>",t+="</p>",t+="</div>",!o.issubscribedbyme){var a={exam:{examId:o.examid}},n=$('input[name="userLoggedIn"]').val();t+='<a class="btn subscribe-exam '+(n?"js-subscribe-exam-category":"js-show-login")+'" data-props="'+JSON.stringify(a)+'">SUBSCRIBE</a>'}t+="</div>",t+="</article>"}),t}function D(e,t){var o="",s="",a="";return"user"===e?(s="No users",a="Looks like there are no users for the searched text!"):"exam"===e?(s="No exams",a="Looks like there are no exams for the searched text!"):"post"===e&&(s="No posts",a="Looks like there are no posts for the searched text!"),t&&(a="Looks like some error has occurred!"),o+='<div class="no-post-card"><img src="https://gs-post-images.grdp.co/2016/11/img1479915604781-75-rs.png" class="no-post-card__img"/><h2 class="no-post-card__title grey">'+s+'</h2><p class="no-post-card__text grey">'+a+"</p></div>"}function L(e){handleAddExamCategory.call(this,e).then(function(e){window.location.reload()}).fail(function(e){console.log(e)})}function R(e){var t="";return t='<div class="post__spam flex-box flex-row">',t+='<div class="post__spam--image flex-box"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 144 144" xml:space="preserve" width="40px" height="40px" class="spam-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/common-icons-sprite.svg#spam-icon"></use></svg></div>',t+='<div class="u-flex-grow post__spam--message">',1==e?(t+='<h4 class="dark-grey">Content Hidden</h4>',t+="<p>The content has been hidden as you have marked it as spam!</p>"):2==e&&(t+='<h4 class="dark-grey">Marked as Spam</h4>',t+="<p>This content has been removed since it was marked as spam by the admin!</p>"),t+="</div>",t+="</div>"}function B(e){var t=$(this).closest(".post"),o=(t.attr("data-id"),t.find(".post-link-data").attr("href"));o&&""!==o?z(window.location.origin+o):createToast({closeButton:!0,message:"Error in post link!"}),te.call(this,e)}function z(e){var t='<div class="share-card">';t+='<div class="flex-box flex-row u-margin-bottom-small"><h3 class="u-flex-grow">Share Post!</h3>',t+='<a class="close-share js-cancel-share"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewbox="0 0 24 24" xml:space="preserve" width="24px" height="24px" class="cross-icon"><use xlink:href="/svg/common-icons-sprite.svg#cross-icon"></use></svg></a>',t+="</div>",t+='<div class="share-options">',t+='<div class="share-options__option flex-box flex-row" link="https://www.facebook.com/sharer/sharer.php?u='+e+'"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewbox="0 0 120 120" xml:space="preserve" width="30px" height="30px" class="facebook-icon"><use xlink:href="/svg/common-icons-sprite.svg#facebook-icon"></use></svg><div class="share-options__option--text u-flex-grow">Facebook</div></div>',t+='<div class="share-options__option flex-box flex-row" link="https://plus.google.com/share?url='+e+'"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewbox="0 0 120 120" xml:space="preserve" width="30px" height="30px" class="google-icon"><use xlink:href="/svg/common-icons-sprite.svg#google-icon"></use></svg><div class="share-options__option--text u-flex-grow">Google+</div></div>',t+='<div class="share-options__option flex-box flex-row" link="https://twitter.com/intent/tweet?url='+e+'"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewbox="0 0 120 120" xml:space="preserve" width="30px" height="30px" class="twitter-icon"><use xlink:href="/svg/common-icons-sprite.svg#twitter-icon"></use></svg><div class="share-options__option--text u-flex-grow">Twitter</div></div>',t+="</div></div>",openModal(t,"share")}function W(e){var t=$(this).attr("link");return window.open(t,"Share Window","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),closeAllModal(),!1}function E(e){e=e||{};var t="";t+='<div class="post__actions flex-box flex-row">',t+='<a class="post__upvote-action '+(e.isLikedByMe?e.unUpvoteClass||"":e.upvoteClass||"")+' flex-box flex-row" data-upvote-count="'+(e.upvoteCount||0)+'"><svg class="like-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"> <use xlink:href="/svg/common-icons-sprite.svg#like-icon" xmlns:xlink="http://www.w3.org/1999/xlink"> </use></svg><span>Upvote</span></a>',t+='<a class="post__comment-action js-open-comments flex-box flex-row"><svg class="comment-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"> <use xlink:href="/svg/common-icons-sprite.svg#comment-icon" xmlns:xlink="http://www.w3.org/1999/xlink"> </use></svg><span>Comment</span></a>',t+='<a class="post__share-action js-share-post flex-box flex-row"><svg class="share-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"> <use xlink:href="/svg/common-icons-sprite.svg#share-icon" xmlns:xlink="http://www.w3.org/1999/xlink"> </use></svg><span>Share</span></a>',t+='<div class="post__other-action js-other-action flex-box flex-row">',t+='<a><svg class="other-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#other-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a>',t+='<div class="post__other-action--menu box-shadow js-sub-menu">',t+='<ul class="list-no-style option-menu-list">';var o=$('input[name="userLoggedIn"]').val();o&&(t+=e.isbookmarkedbyme?'<li class="flex-box flex-row bookmark-list-item js-delete-bookmark"><svg class="bookmark-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">Remove from My Notes</p></li>':'<li class="flex-box flex-row bookmark-list-item js-create-bookmark"><svg class="bookmark-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#bookmark-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">Save to My Notes</p></li>',e.authorid!=ge&&(t+='<li class="flex-box flex-row '+(e.followed?"js-unfollow-post":"js-follow-post")+'"><svg class="'+(e.followed?"notification-off-icon":"notification-icon")+'" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#'+(e.followed?"notification-off-icon":"notification-icon")+'" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">'+(e.followed?"Turn Off Notifications":"Turn On Notifications")+"</p></li>"));var s=window.getSlugService();return t+='<li class="flex-box flex-row js-copy-link"><a href="/'+s.slugifyPost(e.post)+'" class="flex-box flex-row post-link-data"><svg class="copy-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#copy-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">Copy Link</p></a></li>',o&&(t+=e.authorid==ge?'<li class="flex-box flex-row js-delete-post"><svg class="delete-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#delete-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">Delete Post</p></li>':'<li class="flex-box flex-row js-report-spam"><svg class="report-icon" height="25px" version="1.1" viewbox="0 0 48 48" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#report-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><p class="s-16 u-flex-grow">Report</p></li>'),t+="</ul></div>",t+="</div>",t+="</div>"}function U(e){var t=$(this).closest(".post"),o=t.attr("data-id"),s=ke.getPostById(o),a=$(this).closest(".post").find(".bookmark-list-item"),n=$(this).closest(".post").find(".bookmark-heading-icon");Me.createBookMark({postId:o,postType:s.posttype}).then(function(e){if(e.error)return $.Deferred().reject(e);var t=e.BookMarkTime||0;ke.posts[o]&&(ke.posts[o].isbookmarkedbyme=t),a.removeClass("js-create-bookmark"),a.addClass("js-delete-bookmark"),a.find("p").text("Remove from My Notes"),n.attr("class","bookmark-icon bookmark-heading-icon bookmarked js-delete-bookmark"),createToast({closeButton:!0,message:"Post saved to My Notes!"})}).fail(function(e){console.log(e)}),te.call(a,e)}function q(e){var t=$(this).closest(".post"),o=t.attr("data-id"),s=ke.getPostById(o),a=$(this).closest(".post").find(".bookmark-list-item"),n=$(this).closest(".post").find(".bookmark-heading-icon");Me.deleteBookMark({postId:o,bookMarkTime:s.isbookmarkedbyme||0}).then(function(e){return e.error?$.Deferred().reject(e):"myNotes"===ke.type&&"user"===ke.feedsFor?(delete ke.posts[o],ke.postIds.splice(t.index(),1),void t.remove()):(a.addClass("js-create-bookmark"),a.removeClass("js-delete-bookmark"),a.find("p").text("Save to My Notes"),n.attr("class","bookmark-icon bookmark-heading-icon js-create-bookmark"),void createToast({closeButton:!0,message:"Post removed from My Notes!"}))}).fail(function(e){console.log(e)}),te.call(a,e)}function J(e){var t=$(this).closest(".post"),o=t.attr("data-id"),s=t.attr("data-groupid"),a=(ke.getPostById(o),this);Me.deletePost({postId:o,groupId:s}).then(function(e){if(e.error)return $.Deferred().reject(e);var o;if($.each(dataLayer,function(e,t){if(t.pageName)return o=t.pageName,!1}),"postDetail"==o){var s='<div class="card card--box safed-bg box-shadow container-404 flex-box flex-column"><p class="icon-404"><span class="icon-404-sad">:(</span></p><p></p><p>The post you are looking for has been deleted</p><a href="/" class="btn__go-home">Back to home</a><p></p></div>';t.closest("main").html(s)}else t.remove();createToast({closeButton:!0,message:"Post Deleted!"})}).fail(function(e){console.log(e)}),te.call(a,e)}function H(e){return e=e||"","myNotes"===e?'<div class="no-post-card"><img src="https://gs-post-images.grdp.co/2016/12/img1481117582084-89-rs-high-webp.png" class="no-post-card__img"><h2 class="no-post-card__title grey">No Notes Saved!<p class="no-post-card__text grey"> You can save the posts you like and access them all together here!</p></h2></div>':'<div class="no-post-card"><img src="https://gs-post-images.grdp.co/2016/12/img1481117582084-89-rs-high-webp.png" class="no-post-card__img"><h2 class="no-post-card__title grey">No Notes Saved!<p class="no-post-card__text grey"> User can save the posts user like and access them all together here!</p></h2></div>'}function G(e){return e=e||"","myPosts"===e?'<div class="no-post-card"><img src="https://gs-post-images.grdp.co/2016/11/img1479915604781-75-rs.png" class="no-post-card__img"><h2 class="no-post-card__title grey">No posts!</h2><p class="no-post-card__text grey"> Looks like you haven\'t created any posts yet!</p><a class="no-post-card__action js-open-create-post">CREATE POST</a></div>':'<div class="no-post-card"><img src="https://gs-post-images.grdp.co/2016/11/img1479915604781-75-rs.png" class="no-post-card__img"><h2 class="no-post-card__title grey">No posts!</h2><p class="no-post-card__text grey"> Looks like this user hasn\'t created any posts yet!</p></div>'}function Q(e){e.preventDefault();var t=$(this).find(".post-link-data"),o=t.attr("href");o&&""!==o?copyToClipboard(o,function(e){createToast({closeButton:!0,message:"Copied!",action:{actionText:'<a href="'+e+'" target="_blank">Open</a>'}})}):createToast({closeButton:!0,message:"Error in post link!"}),te.call(this,e)}function V(e){var t=$(this).closest(".post").attr("data-id"),o=ke.getPostById(t),s=o.posttype||$(this).closest(".post").attr("data-posttype"),a='<div class="report-spam-card">';a+='<div class="flex-box flex-row u-margin-bottom-small"><h3 class="u-flex-grow">Report Post!</h3>',a+='<a class="close-report-spam js-cancel-report-spam"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewbox="0 0 24 24" xml:space="preserve" width="24px" height="24px" class="cross-icon"><use xlink:href="/svg/common-icons-sprite.svg#cross-icon"></use></svg></a>',a+="</div>",a+='<input type="hidden" value="'+t+'" id="reportPostId">',a+='<div class="report-spam-options">',$.each(Ie[s],function(e,t){a+='<div class="report-spam-options__option flex-box flex-row js-select-report-option">',a+='<div class="report-spam-options__option--radio-btn round-radio-button"></div>',a+='<div class="report-spam-options__option--text u-flex-grow">'+t+"</div>",a+="</div>"}),a+="</div>",a+='<input type="text" class="report-spam-options__explain" placeholder="Explain Further">',a+='<div class="report-spam-actions flex-box flex-row">',a+='<p class="report-spam-error flex-box flex-row red u-flex-grow hidden"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" x="0" y="0" viewBox="0 0 20 20" xml:space="preserve" width="20px" height="20px" class="error-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/svg/common-icons-sprite.svg#error-icon"></use></svg><span>Please select a reason</span></p>',a+='<a class="medium-grey js-cancel-report-spam">CANCEL</a>',a+='<a class="google-red-bg safed js-report-spam-call">REPORT</a></div></div>',openModal(a,"report-spam"),te.call(this,e)}function Z(e){$(this).closest(".report-spam-options").find(".active").removeClass("active"),$(this).find(".report-spam-options__option--radio-btn").addClass("active"),$(this).closest(".report-spam-card").find(".report-spam-actions").find(".report-spam-error").addClass("hidden")}function K(e){var t=$(this).closest(".report-spam-card").find("#reportPostId").val(),o=$(this).closest(".report-spam-card").find(".report-spam-options").find(".active").next().text(),s=$(this).closest(".report-spam-card");if(0==o.trim().length)return void $(this).closest(".report-spam-actions").find(".report-spam-error").removeClass("hidden");var a=$(this).closest(".report-spam-card").find(".report-spam-options__explain").val();a.trim().length>0&&(o+=" User Message : "+a),showLoader(s),Me.reportSpam({postId:t,reason:o}).then(function(e){return e.error||e.errorCode?$.Deferred().reject(e):(Y(t),$('.post[data-id="'+t+'"]').find(".bookmark-post").remove(),createToast({closeButton:!0,message:"Thanks for reporting. Our team will take proper action!"}),void closeAllModal())}).fail(function(e){console.log(e)}).always(function(){hideLoader(s)})}function Y(e){var t=$('.post[data-id="'+e+'"]');t.find(".post__content").remove(),t.find(".post__tags").remove(),t.find(".post__prop").remove(),t.find(".post__actions").remove(),t.find(".post__comment-section-head").remove(),t.find(".post__comments").remove(),t.find(".post__comment-create").remove(),t.find(".post__comment-image-prev").remove(),t.find(".post__head").after(R(1))}function X(e){var t=$(this).closest(".post").attr("data-id"),o=this;Me.followPost({postId:t}).then(function(e){return e.error||e.errorCode?$.Deferred().reject(e):($(o).addClass("js-unfollow-post"),$(o).removeClass("js-follow-post"),$(o).find("p").text("Turn Off Notifications"),$(o).find("svg").removeClass("notification-icon"),$(o).find("svg").addClass("notification-off-icon"),$(o).find("svg use").attr("xlink:href","/svg/common-icons-sprite.svg#notification-off-icon"),createToast({closeButton:!0,message:"You've successfully followed this post!"}),void closeAllModal())}).fail(function(e){console.log(e)}),te.call(this,e)}function ee(e){var t=$(this).closest(".post").attr("data-id"),o=this;Me.unfollowPost({postId:t}).then(function(e){return e.error||e.errorCode?$.Deferred().reject(e):($(o).addClass("js-follow-post"),$(o).removeClass("js-unfollow-post"),$(o).find("p").text("Turn On Notifications"),$(o).find("svg").removeClass("notification-off-icon"),$(o).find("svg").addClass("notification-icon"),$(o).find("svg use").attr("xlink:href","/svg/common-icons-sprite.svg#notification-icon"),createToast({closeButton:!0,message:"You've successfully unfollowed this post!"}),void closeAllModal())}).fail(function(e){console.log(e)}),te.call(this,e)}function te(e){var t=$(this).closest(".js-hide-on-focusout");t.length>0&&$.each(t,function(e,t){$(t).removeAttr("style"),setTimeout(function(){$(t).removeClass("js-hide-on-focusout")},0)}),e.stopPropagation()}function oe(e){var t='<div class="post__comment post__comment--top-comment js-top-comment flex-box flex-row" data-comment-id="'+e.topcommentid+'" data-createdOn="'+e.topcommentcreationdate+'">';return t+='<div class="post__comment-user-pic" style="background: #e3e3e3 url('+(e.topcommentauthorpic||be)+') no-repeat center center;background-size:cover"></div>',t+='<div class="post__comment-content">',t+='<p class="post__comment-user-name flex-box flex-row flex-box-items-center">'+(e.topcommentauthorname||""),e.topcommentbymentor&&(t+='<span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span>'),t+='<span class="post__comment-time">'+getShowTime(e.topcommentcreationdate)+"</span></p>",t+='<div class="flex-box flex-row">',t+='<p class="post__comment-text overflow-ellipsis">'+(e.topcommentdata||"")+"</p>","image"==e.topcommenttype&&(t+='<p class="post__comment-attached-image text-right">',t+='<svg class="camera-icon l-inline-block" height="18px" version="1.1" viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#camera-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg>',t+="Attached Image</p>"),t+="</div>",t+="</div></div>"}function se(e){var t=le(e.authorname,e.authorid),o='<div class="post__comment flex-box flex-row" data-comment-id="'+e.commentid+'" data-createdOn="'+e.createdon+'">';if(o+='<a href="'+t+'" class="post__comment-user-pic" style="background: #e3e3e3 url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',o+='<div class="post__comment-content">',o+='<p class="post__comment-user-name flex-box flex-row flex-box-items-center"><a href="'+t+'">'+(e.authorname||"")+"</a>",e.flags&&e.flags.isMentor&&(o+='<span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span>'),o+='<span class="post__comment-time">'+getShowTime(e.createdon)+"</span></p>",e.spam||e.reported)o+='<p class="post__comment-text light-grey-bg spam-padding"> This comment is hidden because it was marked spam.</p>';else{if(o+='<p class="post__comment-text',e.commentdata){var s=$("<div></div>").html(e.commentdata).text();o+=s.length>me(e.commentdata)?" post__comment__read-more":""}o+='">'+e.commentdata+"</p>";var a=!1;e.metadata&&e.metadata.videoId&&(a=!0,o+=T(e.metadata)),e.metadata&&e.metadata.imageURL&&(o+='<div class="comment_content_img"><img src="'+e.metadata.imageURL+'" data-action="zoom"></div>');var n=e.islikedbyme?"js-un-upvote-comment post__comment--upvoted":"js-upvote-comment";o+='<div class="flex-row flex-box">',o+='<p class="post__comment__upvote-action flex-row flex-box"><a class="flex-row flex-box light-font '+n+' " data-upvote-count="'+(e.likecount||0)+'"><svg class="like-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#like-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__comment__upvote-count">'+(e.likecount||0)+'</span><span class="post__comment__upvote-label">Upvote</span></a></p>',o+='<p class="post__comment__reply-action flex-row flex-box u-flex-grow"><a class="flex-row flex-box light-font js-open-reply"><svg class="reply-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#reply-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__comment__reply-count">'+(e.replycount||0)+'</span><span class="post__comment__reply-label">Reply</span></a></p>',o+='</div><div class="post__comment-reply ajax-image-upload-container"></div>'}return o+="</div></div>"}function ae(e){var t,o=parseJSON(e.metadata.pollData);e.pollDataResp&&(t=e.pollDataResp);var s=le(e.authorname,e.authorid),a='<div class="post__comment flex-box flex-row" data-comment-id="'+e.commentid+'" data-id="'+o.pollId+'" data-createdOn="'+e.createdon+'">';if(a+='<a href="'+s+'" class="post__comment-user-pic" style="background: #e3e3e3 url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',a+='<div class="post__comment-content">',a+='<p class="post__comment-user-name flex-box flex-row flex-box-items-center"><a href="'+s+'">'+(e.authorname||"")+"</a>",e.flags&&e.flags.isMentor&&(a+='<span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span>'),a+='<span class="post__comment-time">'+getShowTime(e.createdon)+"</span></p>",e.spam||e.reported)a+='<p class="post__comment-text light-grey-bg spam-padding"> This comment is hidden because it was marked spam.</p>';else{if(a+='<p class="post__comment-text',e.commentdata){var n=$("<div></div>").html(e.commentdata).text();a+=n.length>me(e.commentdata)?" post__comment__read-more":""}a+='">'+e.commentdata+"</p>";var i=!1;e.metadata&&e.metadata.videoId&&(i=!0,a+=T(e.metadata));var r,p=-1,l=!1;t&&t.submitted&&Object.keys(t.submitted).length>0&&(p=t.submitted.optionSelected),l=Number(o.correctOptionIndex)>-1,r=Number(o.correctOptionIndex),e.metadata.imageURL&&(a+='<div class="comment_content_img"><img src="'+e.metadata.imageURL+'" data-action="zoom"></div>');var c=0;t&&t.pollData instanceof Array&&(c=t.pollData.reduce(function(e,t){return e+ +t.attemptNum},0)),a+='<ul class="post__poll-options '+(p===-1?"js-submit-poll":"")+'" data-correct-option-index="'+Number(o.correctOptionIndex)+'" data-total-poll-attempts="'+c+'" data-poll-comment="true">';var d=o.optionsArrayList,m=[];t&&t.pollData&&t.pollData instanceof Array&&(m=t.pollData.reduce(function(e,t){return e[t.optionKey]=t,e},{}));var u="A";d&&d instanceof Array&&$.each(d,function(e,t){var o="";p>-1&&(e===p&&(l?r!==e&&l&&(o="post__poll-option--incorrect"):o="post__poll-option--selected"),e===r&&l&&(o="post__poll-option--correct")),a+='<li class="post__poll-option '+o+'">';var s=m[e]&&m[e].attemptNum||0,n=Math.round10(s/c*100,-2);a+='<a class="flex-box flex-row" data-chosen-count="'+s+'">',a+='<span class="post__poll-option__label flex-box flex-row">'+u+"</span>",a+='<span class="post__poll-option__text">'+$("<div></div>").html(t).html()+"</span>",a+=p>-1?'<span class="post__poll-highlight-bar" style="transform: translateX('+(n-100)+'%);"></span><span class="post__poll-chosen-percent">'+(l?"":Math.round(n)+"%")+"</span>":'<span class="post__poll-highlight-bar"></span><span class="post__poll-chosen-percent"></span>',a+="</a></li>",u=String.fromCharCode(u.charCodeAt(0)+1)}),a+="</ul>";var h=e.islikedbyme?"js-un-upvote-comment post__comment--upvoted":"js-upvote-comment";a+='<div class="flex-row flex-box">',a+='<p class="post__comment__upvote-action flex-row flex-box"><a class="flex-row flex-box light-font '+h+' " data-upvote-count="'+(e.likecount||0)+'"><svg class="like-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#like-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__comment__upvote-count">'+(e.likecount||0)+'</span><span class="post__comment__upvote-label">Upvote</span></a></p>',a+='<p class="post__comment__reply-action flex-row flex-box u-flex-grow"><a class="flex-row flex-box light-font js-open-reply"><svg class="reply-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#reply-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__comment__reply-count">'+(e.replycount||0)+'</span><span class="post__comment__reply-label">Reply</span></a></p>',a+='<span class="post__comment__poll-attempts"><span>'+c+"</span>"+(1!=c?" attempts":" attempt")+"</span>",a+='</div><div class="post__comment-reply ajax-image-upload-container"></div>'}return a+="</div></div>"}function ne(e){var t=le(e.authorname,e.authorid),o='<div class="post__reply flex-box flex-row" data-reply-id="'+e.replyid+'" data-createdOn="'+e.createdon+'">';if(o+='<a href="'+t+'" class="post__reply-user-pic" style="background: #e3e3e3 url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',o+='<div class="post__reply-content">',o+='<p class="post__reply-user-name flex-box flex-row flex-box-items-center"><a href="'+t+'">'+(e.authorname||"")+"</a>",e.flags&&e.flags.isMentor&&(o+='<span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span>'),o+='<span class="post__reply-time">'+getShowTime(e.createdon)+"</span></p>",e.isMarkedAbuse||e.spam)o+='<p class="post__reply-text light-grey-bg spam-padding"> This reply is hidden because it was marked spam.</p>';else{if(o+='<p class="post__reply-text',e.data){var s=$("<div></div>").html(e.data).text();o+=s.length>me(e.data)?" post__comment__read-more":""}o+='">'+e.data+"</p>";var a=!1;e.meta&&e.meta.videoId&&(a=!0,o+=T(e.meta)),e.meta&&e.meta.imageURL&&(o+='<div class="reply_content_img"><img src="'+e.meta.imageURL+'" data-action="zoom"></div>');var n=e.isLiked?"js-un-upvote-reply post__reply--upvoted":"js-upvote-reply";o+='<div class="flex-row flex-box">',o+='<p class="post__reply__upvote-action flex-row flex-box"><a class="flex-row flex-box light-font '+n+' " data-upvote-count="'+(e.likes||0)+'"><svg class="like-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#like-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__reply__upvote-count">'+(e.likes||0)+'</span><span class="post__reply__upvote-label">Upvote</span></a></p>',o+="</div>"}return o+="</div></div>"}function ie(e){var t,o=parseJSON(e.meta.pollData);e.pollDataResp&&e.pollDataResp&&(t=e.pollDataResp);var s=le(e.authorname,e.authorid),a='<div class="post__reply flex-box flex-row" data-reply-id="'+e.replyid+'" data-id="'+o.pollId+'" data-createdOn="'+e.createdon+'">';if(a+='<a href="'+s+'" class="post__reply-user-pic" style="background: #e3e3e3 url('+(e.authorpic||be)+') no-repeat center center;background-size:cover"></a>',a+='<div class="post__reply-content">',a+='<p class="post__reply-user-name flex-box flex-row flex-box-items-center"><a href="'+s+'">'+(e.authorname||"")+"</a>",e.flags&&e.flags.isMentor&&(a+='<span class="rocket-green-bg mentor-tick"><svg height="16px" version="1.1" viewBox="0 0 48 48" width="16px" x="0" xmlns="http://www.w3.org/2000/svg" y="0" class="safed-tick-icon tick-icon"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></span>'),a+='<span class="post__reply-time">'+getShowTime(e.createdon)+"</span></p>",e.isMarkedAbuse||e.spam)a+='<p class="post__reply-text light-grey-bg spam-padding"> This reply is hidden because it was marked spam.</p>';else{if(a+='<p class="post__reply-text',e.data){var n=$("<div></div>").html(e.data).text();a+=n.length>me(e.data)?" post__comment__read-more":""}a+='">'+e.data+"</p>";var i=!1;e.meta&&e.meta.videoId&&(i=!0,a+=T(e.meta)),e.meta&&e.meta.imageURL&&(a+='<div class="reply_content_img"><img src="'+e.meta.imageURL+'" data-action="zoom"></div>');var r,p=-1,l=!1;t&&t.submitted&&Object.keys(t.submitted).length>0&&(p=Number(t.submitted.optionSelected)),l=Number(o.correctOptionIndex)>-1,r=Number(o.correctOptionIndex);var c=0;t&&t.pollData instanceof Array&&(c=t.pollData.reduce(function(e,t){return e+ +t.attemptNum},0)),a+='<ul class="post__poll-options '+(p===-1?"js-submit-poll":"")+'" data-correct-option-index="'+Number(o.correctOptionIndex)+'" data-total-poll-attempts="'+c+'" data-poll-reply="true">';var d=o.optionsArrayList,m=[];t&&t.pollData&&t.pollData instanceof Array&&(m=t.pollData.reduce(function(e,t){return e[t.optionKey]=t,e},{}));var u="A";d&&d instanceof Array&&$.each(d,function(e,t){var o="";p>-1&&(e===p&&(l?r!==e&&l&&(o="post__poll-option--incorrect"):o="post__poll-option--selected"),e===r&&l&&(o="post__poll-option--correct")),a+='<li class="post__poll-option '+o+'">';var s=m[e]&&m[e].attemptNum||0,n=Math.round10(s/c*100,-2);a+='<a class="flex-box flex-row" data-chosen-count="'+s+'">',a+='<span class="post__poll-option__label flex-box flex-row">'+u+"</span>",a+='<span class="post__poll-option__text">'+$("<div></div>").html(t).html()+"</span>",a+=p>-1?'<span class="post__poll-highlight-bar" style="transform: translateX('+(n-100)+'%);"></span><span class="post__poll-chosen-percent">'+(l?"":Math.round(n)+"%")+"</span>":'<span class="post__poll-highlight-bar"></span><span class="post__poll-chosen-percent"></span>',a+="</a></li>",u=String.fromCharCode(u.charCodeAt(0)+1)}),a+="</ul>";var h=e.isLiked?"js-un-upvote-reply post__reply--upvoted":"js-upvote-reply";a+='<div class="flex-row flex-box">',a+='<p class="post__reply__upvote-action flex-row flex-box u-flex-grow"><a class="flex-row flex-box light-font '+h+' " data-upvote-count="'+(e.likes||0)+'"><svg class="like-icon" height="20px" version="1.1"viewbox="0 0 48 48" width="20px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#like-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg><span class="post__reply__upvote-count">'+(e.likes||0)+'</span><span class="post__reply__upvote-label">Upvote</span></a></p>',a+='<span class="post__reply__poll-attempts"><span>'+c+"</span>"+(1!=c?" attempts":" attempt")+"</span>",a+="</div>"}return a+="</div></div>"}function re(e,t){var o=e?"post__reply":"post__comment",s='<div class="'+o+'-create flex-box flex-row">';return s+='<textarea class="'+o+"-create__content-area js-"+(e?"reply":"comment")+'-content-area" rows="1" placeholder="'+(e?"Write a reply":"Write a comment")+'"></textarea>',s+='<form class="'+o+'-create__upload-img-form ajax-image-upload-form flex-row flex-box" enctype="multipart/form-data" method="post">',s+='<label class="ajax-image-upload__label"><input class="ajax-image-upload__file" id="file'+(e?"-"+t:"")+'" name="imageForPost" type="file"><svg class="camera-icon" height="25px" version="1.1" viewbox="0 0 44.5 36" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#camera-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></label></form>',s+='<div class="'+o+'-create__add-smiley js-smiley smiley">',s+='<a class="'+o+'-create__add-smiley-btn js-smiley-btn smiley__btn"><svg class="smiley-icon" height="25px" version="1.1" viewbox="0 0 42.3 36" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#smiley-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a></div>',s+='<a class="'+o+'-create__add-poll-btn js-open-create-poll"><svg class="poll-icon" height="25px" version="1.1" viewbox="0 0 42.3 36" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#poll-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a>',s+='<a class="'+o+'-create__btn"><svg class="tick-icon" height="25px" version="1.1" viewbox="0 0 32 24" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#tick-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a></div>',s+='<div class="'+o+'-image-prev ajax-image-upload-prev hidden flex-box flex-row"><div class="ajax-image-upload-prev__img-container">',s+='<a class="image-link" href="" target="_blank"><img class="img-responsive" src="">',s+='<div class="ajax-image-upload-prev__upload-progress-bar rocket-green-bg"></div></a>',s+='<a class="'+o+'-image-prev--remove ajax-image-upload-prev--remove"><svg class="cross-icon" height="25px" version="1.1" viewbox="0 0 24 24" width="25px" x="0" xmlns="http://www.w3.org/2000/svg" y="0"><use xlink:href="/svg/common-icons-sprite.svg#cross-icon" xmlns:xlink="http://www.w3.org/1999/xlink"></use></svg></a>',s+='</div><p class="ajax-image-upload-prev__message medium-grey s-16"></p></div>'}function pe(e){var t=window.getSlugService();return t.slugifyPost(e)}function le(e,t){var o=window.getSlugService();return o.slugifyUser(e,t)}function ce(e){var t,o,s=e.imageAspectRatio,a=e.imageWidth,n=Math.round(a/s),i=350,r=620;return s<=1&&(o=n>=i?i:n,t=Math.round(o*s)),s>1&&(t=a>=r?r:a,o=Math.round(t/s)),{width:t,height:o}}function de(){$(this).removeClass("post__comment__read-more")}function me(e){e=e||"";var t=(e.match(new RegExp("<br>","g"))||[]).length;return _e-t*we}function ue(e){return e=e.replace(/^(<br>(\s)*)+|(<br>(\s)*)+$/g,""),e.replace(/(<br>(\s)*)+/g,"<br>")}$(document).ready(function(){function t(){var e=$(document).find(".feeds__nav__head");0!==e.length&&$(document).on("scroll",function(){if(window.scrollY>e.offset().top-$(".main-header").height()){var t={};t.element=$(".feeds__nav"),t.width=$(".feeds").width(),addStickyHeader(t)}else{var t={};t.element=$(".feeds__nav"),removeStickyHeader(t)}})}function o(){le&&i(),le=$(document).on("scroll",n)}function n(e){var t=$(window).scrollTop(),o=$("body")[0].scrollHeight,s=$(window).innerHeight(),a=(t+s)/o*100;a<80||j()}function i(){le.off("scroll",n)}function j(){if(!ye){var t={action:"show-more"},o=ie(t);if(o&&!(Object.keys(o).length<1)){ye=!0,T(he.find(".js-feeds"));var s=(ke.postIds||[]).length;if("home"===ke.feedsFor)return void z(o).then(function(e){var t=y(e);C(he.find(".js-feeds")),k(t,{appendContent:!0}),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),le.off("scroll")}).always(function(){ye=!1});if("examCategory"===ke.feedsFor)return void E(o).then(function(e){if(C(he.find(".js-feeds")),e.posts&&0===e.posts.length)return void i();ke.examId=o.examId,ke.type=o.postTypeFilter;var a=y(e);t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1});if("subject"===ke.feedsFor){if("all"===o.type)return void se(o).then(function(e){if(C(he.find(".js-feeds")),e&&0===e.length)return void i();ke.subjectId=o.subjectId,ke.type=o.type;var a=y({feeds:e});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1});oe(o).then(function(e){if(C(he.find(".js-feeds")),e&&0===e.length)return void i();ke.subjectId=o.subjectId,ke.type=o.type;var a=y({feeds:e});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1})}if("exam"===ke.feedsFor){if("all"===o.type)return void Y(o).then(function(e){if(C(he.find(".js-feeds")),e.posts&&0===e.posts.length)return void i();ke.groupId=o.groupId,ke.type=o.type,ke.pageState=e.pageState;var a=y({feeds:e.posts});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1});te(o).then(function(e){if(C(he.find(".js-feeds")),e&&0===e.length)return void i();ke.groupId=o.groupId,ke.type=o.type;var a=y({feeds:e});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1})}if("user"===ke.feedsFor){if("myPosts"===o.type||"posts"===o.type)return void ne(o).then(function(e){if(C(he.find(".js-feeds")),e&&0===e.length)return i();ke.userId=o.userId,ke.type=o.type;var a=y({feeds:e});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1});if("myNotes"===o.type||"notes"===o.type)return void ae(o).then(function(e){if(C(he.find(".js-feeds")),e&&0===e.length)return i();ke.type=o.type,ke.userId=o.userId;var a=y({feeds:e});t.appendContent=!0,k(a,t),$(document).trigger("showWidgets",[s])}).fail(function(e){C(he.find(".js-feeds")),console.log(e)}).always(function(){ye=!1})}if("search"===o.feedsFor){var a=o.searchKey;if("post"===o.type&&!$e.posts.finish)return void je.getSearchFeeds({q:a,source:"post",start:$e.posts.pageState}).then(function(o){if($e.posts.pageState=o.pageState,o.posts.length){var s,a=e(o.posts);$e.posts.posts=$e.posts.posts.concat(a),s=y({feeds:a}),C($(".js-feeds")),t.appendContent=!0,k(s,t)}else C($(".js-feeds")),$e.posts.finish=!0}).fail(function(e){C($(".js-feeds")),console.log(e)}).always(function(){ye=!1});if("exam"===o.type&&!$e.groups.finish)return void je.getSearchFeeds({q:a,source:"exam",start:$e.groups.pageState}).then(function(e){if($e.groups.pageState=e.pageState,e.groups.length){var o;$e.groups.groups=$e.groups.groups.concat(e.groups),o=A(e.groups),C($(".js-feeds")),t.appendContent=!0,k(o,t)}else C($(".js-feeds")),$e.groups.finish=!0}).fail(function(e){C($(".js-feeds")),console.log(e)}).always(function(){ye=!1});if("user"==o.type&&!$e.users.finish)return void je.getSearchFeeds({q:a,source:"user",start:$e.users.pageState}).then(function(e){if($e.users.pageState=e.pageState,e.users.length){var o;$e.users.users=$e.users.users.concat(e.users),o=F(e.users),C($(".js-feeds")),t.appendContent=!0,k(o,t)}else C($(".js-feeds")),$e.users.finish=!0}).fail(function(e){C($(".js-feeds")),console.log(e)}).always(function(){ye=!1});C($(".js-feeds")),ye=!1}}}}function I(e){e.length>=10||j()}function C(e){var t=e.find(".js-feed-loader");t.fadeOut(),t.remove()}function T(e){e.append($(S()).hide());var t=e.find(".js-feed-loader");t.fadeIn()}function S(){var e='<article class="post box-shadow ajax-image-upload-container post--shared-info js-feed-loader">';return e+='<div class="post__head flex-box flex-row">',e+='<div class="post__user-profile-pic"></div>',e+='<div class="bundle"><p class="shimmer shimmer-bar-small"></p>',e+='<p class="post__info">',e+='<span class="shimmer l-inline-block shimmer-bar-xsmall"></span>',e+='<span class="shimmer l-inline-block shimmer-bar-xxsmall"></span></p>',e+="</div></div>",e+='<div class="card card--box">',e+='<p class="shimmer shimmer-bar-large"></p>',e+='<p class="shimmer shimmer-bar-medium"></p>',e+='<div class="u-spacer-xsmall"></div>',e+='<p class="shimmer shimmer-bar-large"></p>',e+='<p class="shimmer shimmer-bar-medium"></p>',e+='<p class="shimmer shimmer-bar-small"></p>'}function O(t,s){if(s&&$(".js-feeds-posts").length&&(e([parseJSON($(".js-feeds-posts").val())]),$(".js-feeds-posts").remove()),0!==$(".js-feeds-props").length){var a=ke.props=parseJSON($(".js-feeds-props").val()),n={};if(a&&!(Object.keys(a).length<1)){$(".js-feeds-props").remove(),o();var i=a.type,r=a.feedsFor;$(".js-feeds-posts").length&&(n.posts=parseJSON($(".js-feeds-posts").val()),$(".js-feeds-posts").remove()),$(".js-feeds-err").length&&(n.err=parseJSON($(".js-feeds-err").val()),$(".js-feeds-err").remove()),$(".js-feeds-meta").length&&(n.meta=parseJSON($(".js-feeds-meta").val()),$(".js-feeds-meta").remove()),ke.posts={},ke.postIds=[],n.posts=n.posts||[];var p=e(n.posts);if("all"===i&&"home"===r){if(n.err&&406===n.err.status)return void showSubscribeExamModal();ke.type=i,ke.feedsFor=r,I(n.posts)}"examCategory"===r&&(ke.examId=a.examId,ke.type=a.type,ke.feedsFor=r,I(n.posts)),"exam"===r&&(ke.groupId=a.groupId,ke.type=a.type,ke.feedsFor=r,ke.pageState=n.meta.pageState,I(n.posts)),"subject"===r&&(ke.subjectId=a.subjectId,ke.type=a.type,ke.feedsFor=r,I(n)),"user"===r&&(ke.userId=a.userId,ke.type=a.type,ke.feedsFor=r,I(n)),"search"===a.feedsFor&&(a.searchKey&&($('input[name="q"]').val(a.searchKey),$(".js-search-box").hasClass("search-box-focused")&&$(".js-search-box").find("svg.cross-icon").css("display","block")),"post"==a.type?($e.posts.posts=p,Object.keys($e.posts.posts)||($e.posts.posts=[]),$e.posts.pageState=n.meta.pageState):"exam"==a.type?($e.groups.groups=parseJSON($(".js-feeds-groups").val()),Object.keys($e.groups.groups)||($e.groups.groups=[]),$e.groups.pageState=n.meta.pageState,$(".js-feeds-groups").remove()):"user"==a.type&&($e.users.users=parseJSON($(".js-feeds-users").val()),Object.keys($e.users.users)||($e.users.users=[]),$e.users.pageState=n.meta.pageState,$(".js-feeds-users").remove()))}}}function M(e){var t=$(this),o=t.attr("data-type");P(t);var s=getQueryParams();s.feedTab=ce[o];var a=window.location.pathname+"?"+$.param(s);window.history.pushState(ke.props,null,a)}function N(e){var t=$(this),o=t.attr("data-type");P(t);var s=getQueryParams();s.source=o;var a=window.location.pathname+"?"+$.param(s);window.history.pushState(ke.props,null,a)}function P(e){if(0!==e.length){var t=e.parent(),s=t.find(".feeds__nav-link--active");if(!e.hasClass("feeds__nav-link--active")){var a=e.attr("data-type"),n=ke.props;n&&0!==Object.keys(n).length&&(n.type=a,loadFeeds({action:"init"}),s.removeClass("feeds__nav-link--active"),e.addClass("feeds__nav-link--active"),o())}}}function R(){$.each(dataLayer,function(e,t){if("postDetail"===t.pageName)return O({action:"init"},!0),!1})}function z(t){return Me.getMyfeeds(t).then(function(t){var o={};if(!t)return $.Deferred().reject();var s=e(t.feeds);return Object.assign(o,t),o.feeds=s,o})}function E(t){return t.pageSize=20,Me.getCategoryFeeds(t).then(function(t){var o=e(t.posts),s={};return Object.assign(s,t),s.feeds=o,s})}function Y(t){return Me.getExamAllFeeds(t).then(function(t){if(t.error)return $.Deferred().reject(t);var o=e(t.posts),s={};return Object.assign(s,t),s.feeds=o,s})}function te(t){return Me.getExamFeeds(t).then(function(t){return t.error?$.Deferred().reject(t):e(t.posts)})}function oe(t){return Me.getSubjectFeeds(t).then(function(t){return t.error?$.Deferred().reject(t):e(t)})}function se(t){return Me.getSubjectAllFeeds(t).then(function(t){return t.error?$.Deferred().reject(t):e(t)})}function ae(t){return t=t||{},Me.fetchBookMarks(t).then(function(t){return t=t||{},t.posts=t.posts||[],e(t.posts)})}function ne(t){return Me.getPostOfUserForMobile(t).then(function(t){return e(t)})}function ie(e){return e=e||{},"init"===e.action?ke.props:"show-more"===e.action?ke.getShowMoreProps():void 0}function re(e){return e=e||{},Me.fetchAboutUs(e).then(function(e){return e=e||{}})}var pe=!1;$('input[name="userLoggedIn"]').length>0&&(pe=!0),$("input#userId").length>0&&(ge=$("input#userId").val(),$("input#userId").remove()),pe?($(document).on("click",".js-upvote-post",u),$(document).on("click",".js-upvote-comment",h),$(document).on("click",".js-submit-poll .post__poll-option a",_),$(document).on("click",".js-share-post",B),$(document).on("click",".js-create-bookmark",U),$(document).on("click",".js-delete-bookmark",q),$(document).on("click",".js-report-spam",V),$(document).on("click",".js-report-spam-call",K),$(document).on("click",".js-delete-post",J),$(document).on("click",".js-follow-post",X),$(document).on("click",".js-unfollow-post",ee),$(document).on("click",".share-options__option",W),$(document).on("click",".js-submit-comment",s),$(document).on("click",".js-subscribe-exam-category",L),$(document).on("click",".js-upvote-reply",g),$(document).on("click",".js-submit-reply",a)):$(document).on("click",".js-upvote-post, .js-upvote-comment, .js-submit-poll .post__poll-option a, .js-other-action, .js-create-bookmark, .js-submit-comment, .js-submit-reply, .js-delete-bookmark, .js-report-spam, .js-report-spam-call, .js-delete-post, .js-copy-link, .js-unfollow-post, .js-follow-post, .js-share-post, .js-subscribe-exam-category, .js-upvote-reply",function(e){showAuthLogin()}),$(document).on("click",".js-open-comments",d),$(document).on("click",".post__comment--top-comment",w),$(document).on("click",".js-top-comment",d),$(document).on("click",".js-select-report-option",Z),$(document).on("click",".js-cancel-report-spam, .js-cancel-report-question, .js-cancel-share",closeAllModal),$(document).on("click",".js-un-upvote-post",f),$(document).on("click",".js-un-upvote-comment",v),$(document).on("keyup",".js-comment-content-area",r),$(document).on("paste cut delete",".js-comment-content-area",function(e){var t=this;setTimeout(function(){r.call(t,e)},0)}),$(document).on("click",".js-feeds-menu a",M),$(document).on("click",".js-feeds-search-menu a",N),$(document).on("click",".post__comment__read-more",de),$(document).on("click",".js-load-previous-comments",l),$(document).on("click",".js-other-action",toggleSubMenu),$(document).on("click",".js-copy-link",Q),$(document).on("click",".js-open-reply",m),$(document).on("click",".js-un-upvote-reply",x),$(document).on("keyup",".js-reply-content-area",p),$(document).on("paste cut delete",".js-reply-content-area",function(e){var t=this;setTimeout(function(){p.call(t,e)},0)}),$(document).on("click",".js-load-previous-replies",c),t();var le;he=$("body").find(".js-feeds-container"),he=he.length>1?$(he[0]):he,window.loadFeeds=function(t){var o=ie(t);if(o&&!(Object.keys(o).length<1)){videos.empty(),k("",{}),T($(".js-feeds"));var s=o.type,a=o.feedsFor;if("search"!=a&&(ke.posts={},ke.postIds=[]),"all"===s&&"home"===a&&z().then(function(e){ke.type=s,ke.feedsFor=a;var o=y(e);C($(".js-feeds")),k(o,t),$(document).trigger("showWidgets",[0]),I(e.feeds)}).fail(function(e){C($(".js-feeds")),406===e.status&&showSubscribeExamModal(),console.log(e)}),"examCategory"===a){var n={};n.postTypeFilter=s,n.examId=o.examId,E(n).then(function(e){ke.examId=o.examId,ke.type=n.postTypeFilter,ke.feedsFor=a;var s=y(e);C($(".js-feeds")),k(s,t),$(document).trigger("showWidgets",[0]),I(e.feeds)}).fail(function(e){console.log(e)})}if("subject"===a){var n={};if(n.createdOn=Date.now(),n.subjectId=o.subjectId,n.dir=1,"all"===s)return n.createdOn=0,n.dir="0",n.subjectId=o.subjectId,void se(n).then(function(e){ke.subjectId=o.subjectId,ke.type=s,ke.feedsFor=a,C($(".js-feeds"));var n=y({feeds:e});k(n,t),$(document).trigger("showWidgets",[0]),I(e)}).fail(function(e){C($(".js-feeds")),console.log(e)});n.type=o.type,oe(n).then(function(e){ke.subjectId=o.subjectId,ke.type=s,ke.feedsFor=a;var n=y({feeds:e});C($(".js-feeds")),k(n,t),$(document).trigger("showWidgets",[0]),I(e)}).fail(function(e){C($(".js-feeds")),console.log(e)})}if("exam"===a){var n={};if(n.groupId=o.groupId,n.getList=!1,"all"===s)return n.pageState=0,void Y(n).then(function(e){ke.groupId=o.groupId,ke.type=s,ke.feedsFor=a,ke.pageState=e.pageState,C($(".js-feeds"));var n=y({feeds:e.posts});k(n,t),$(document).trigger("showWidgets",[0]),I(e.posts)}).fail(function(e){C($(".js-feeds")),console.log(e)});n.createdOn=0,n.type=o.type,n.direction="0",te(n).then(function(e){ke.groupId=o.groupId,ke.type=s,ke.feedsFor=a;var n=y({feeds:e});C($(".js-feeds")),k(n,t),$(document).trigger("showWidgets",[0]),I(e)}).fail(function(e){C($(".js-feeds")),console.log(e)})}if("user"===a){var n={};if(n.createdOn=Date.now(),n.userId=o.userId,n.dir="1","myPosts"===s||"posts"===s)return void ne(n).then(function(e){ke.userId=o.userId,ke.type=s,ke.feedsFor=a;var n=y({feeds:e});0===e.length&&(n=G(s)),C($(".js-feeds")),k(n,t),$(document).trigger("showWidgets",[0]),I(e)}).fail(function(e){C($(".js-feeds")),console.log(e)});"myNotes"!=s&&"notes"!==s||ae({userId:o.userId}).then(function(e){C($(".js-feeds")),ke.type=s,ke.feedsFor=a;var o=y({feeds:e});0===e.length&&(o=H(s)),k(o,t),$(document).trigger("showWidgets",[0]),I(e)}).fail(function(e){C($(".js-feeds")),console.log(e)}),"about"==s&&re({userId:o.userId}).then(function(e){C($(".js-feeds")),ke.type=s,ke.feedsFor=a;var t=Object.assign({},fe);t.videos=e.videos,t.queryAnsweredCount=e.queryAnsweredCount;var o=b(t);k("",{},o)}).fail(function(e){C($(".js-feeds")),console.log(e)})}if("search"===a){var i=o.searchKey;if("post"===s){if($e.posts.posts&&$e.posts.posts.length){ke.type=s,ke.feedsFor=a;var r=y({feeds:$e.posts.posts});return C($(".js-feeds")),k(r,t),void C($(".js-feeds"))}if(!$e.posts.finish)return ye=!0,void je.getSearchFeeds({q:i,source:"post"}).then(function(n){ke.userId=o.userId,ke.type=s,ke.feedsFor=a,$e.posts.pageState=n.pageState;var i=e(n.posts);$e.posts.posts=i;var r;i.length?r=y({feeds:i}):(r=D(s),$e.posts.finish=!0),C($(".js-feeds")),k(r,t)}).fail(function(e){var o=D(s,!0);C($(".js-feeds")),k(o,t),console.log(e)}).always(function(e){ye=!1});ke.type=s,ke.feedsFor=a,$e.posts.posts&&!$e.posts.posts.length&&(r=D(s),k(r,t)),C($(".js-feeds"))}if("exam"===s){if($e.groups.groups&&$e.groups.groups.length){ke.type=s,ke.feedsFor=a;var r=A($e.groups.groups);return C($(".js-feeds")),void k(r,t)}if(!$e.groups.finish)return ye=!0,void je.getSearchFeeds({q:i,source:"exam"}).then(function(e){ke.userId=o.userId,ke.type=s,ke.feedsFor=a,$e.groups.groups=e.groups,$e.groups.pageState=e.pageState;var n;e.groups.length?n=A(e.groups):(n=D(s),$e.groups.finish=!0),C($(".js-feeds")),k(n,t)}).fail(function(e){var o=D(s,!0);C($(".js-feeds")),k(o,t),console.log(e)}).always(function(e){ye=!1});ke.type=s,ke.feedsFor=a,$e.groups.groups&&!$e.groups.groups.length&&(r=D(s),k(r,t)),C($(".js-feeds"))}if("user"==s){if($e.users.users&&$e.users.users.length){ke.type=s,ke.feedsFor=a;var r=F($e.users.users);return C($(".js-feeds")),void k(r,t)}if(!$e.users.finish)return ye=!0,void je.getSearchFeeds({q:i,source:"user"}).then(function(e){ke.userId=o.userId,ke.type=s,ke.feedsFor=a,$e.users.users=e.users,$e.users.pageState=e.pageState;var n;e.users.length?n=F(e.users):(n=D(s),$e.users.finish=!0),C($(".js-feeds")),k(n,t)}).fail(function(e){var o=D(s,!0);C($(".js-feeds")),k(o,t),console.log(e)}).always(function(e){ye=!1});ke.type=s,ke.feedsFor=a,$e.users.users&&!$e.users.users.length&&(r=D(s),k(r,t)),C($(".js-feeds"))}}}};var ce={article:"article",test:"quizzes",all:"all",myNotes:"myNotes",myPosts:"myPosts",notes:"notes",posts:"posts",about:"about",answers:"answers"};$(window).on("popstate",function(e){var t,o=e.originalEvent.state,s=getQueryParams();if(null===o){if(s.feedTab&&ce[s.feedTab]&&(t=$(document).find('.feeds__nav a[data-type="'+ce[s.feedTab]+'"]'),t.length))return void P(t)}else if(o.type)return t=$(document).find('.feeds__nav a[data-type="'+o.type+'"]'),void P(t);t=$(document).find(".feeds__nav a:first-child"),P(t)}),O({action:"init"}),R()});var he,ge,fe,ve={},xe={},_e=240,we=60,ye=!1;$("input#mentorData").length>0&&(fe=parseJSON($("input#mentorData").val()),$("input#mentorData").remove());var be="https://gs-post-images.grdp.co/2016/11/img1479294686367-58-rs.png",ke={posts:{},postIds:[],feedsFor:"",type:"",getShowMoreProps:function(){var e=this.props;if("search"===e.feedsFor)return e;var t=this.postIds;return 0===t.length?{}:"home"===this.feedsFor?{postId:t[t.length-1],dir:1}:"examCategory"===this.feedsFor?{examId:this.examId,postTypeFilter:this.type,createdOn:this.posts[t[t.length-1]].createdon}:"subject"===this.feedsFor?{subjectId:this.subjectId,dir:"1",createdOn:this.posts[t[t.length-1]].createdon,type:this.type}:"exam"===this.feedsFor&&"all"===this.type?{groupId:this.groupId,pageState:this.pageState,type:this.type,getList:!1}:"exam"===this.feedsFor&&"all"!==this.type?{groupId:this.groupId,direction:"1",createdOn:this.posts[t[t.length-1]].createdon,type:this.type,getList:!1}:"user"!==this.feedsFor||"myPosts"!==this.type&&"posts"!==this.type?"user"!==this.feedsFor||"myNotes"!==this.type&&"notes"!==this.type?void 0:{userId:this.userId,dir:1,bookmarkTime:this.posts[t[t.length-1]].isbookmarkedbyme,type:this.type}:{userId:this.userId,dir:"1",createdOn:this.posts[t[t.length-1]].createdon,type:this.type}},getPostById:function(e){return e&&ke.posts&&ke.posts[e]?ke.posts[e]:{}},storePost:function(e){e&&ke.posts&&!ke.posts[e.postid]&&(ke.posts[e.postid]=e,ke.postIds.unshift(e.postid))}},je={getSearchFeeds:function(e){return $.ajax({method:"GET",url:"/api/search",data:e,dataType:"json",contentType:"application/json"})}},$e={posts:{},groups:{},users:{}},Ie={text:["Spam/Abusive","Wrong Information","Should not be on Gradeup"],image:["Spam/Abusive","Wrong Information","Should not be on Gradeup"],article:["Wrong Answer","Spam/Abusive","Should not be on Gradeup"],
test:["Spam/Abusive","Wrong Information","Should not be on Gradeup"],shared:["Spam/Abusive","Wrong Information","Should not be on Gradeup"],poll:["Wrong Answer","Spam/Abusive","Should not be on Gradeup"]};window.getPostById=ke.getPostById,window.storePost=ke.storePost,window.getPollsHtml=ae,window.getReplyPollsHtml=ie,window.getCommentsHtml=se,window.getFeedsDOM=y,window.handlePostCommentRequest=n;var Ce={submitPoll:function(e){return $.ajax({method:"POST",url:"/assessment/submitPoll",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},likePost:function(e){return $.ajax({method:"POST",url:"/posts/likePost",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},getCommentWRTCreatedOn:function(e){return $.ajax({method:"GET",url:"/api/comment",data:e,dataType:"json",contentType:"application/json"})},getCommentDataByVersion:function(e){return $.ajax({method:"POST",url:"/comments/getCommentDataByVersion",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},likeComment:function(e){return $.ajax({method:"POST",url:"/comments/likeComment",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},postComment:function(e){return $.ajax({method:"POST",url:"/api/comment",data:getJSON(e),dataType:"json",contentType:"application/json"})},getReply:function(e){return $.ajax({method:"GET",url:"/api/reply",data:e,dataType:"json",contentType:"application/json"})},likeReply:function(e){return $.ajax({method:"POST",url:"/api/reply/"+e.replyId+"/like",dataType:"json",contentType:"application/json"})},unlikeReply:function(e){return $.ajax({method:"DELETE",url:"/api/reply/"+e.replyId,dataType:"json",contentType:"application/json"})},postReply:function(e){return $.ajax({method:"POST",url:"/api/reply/create",data:getJSON(e),dataType:"json",contentType:"application/json"})}},Te=function(e,s){var a,n,i,r;return"poll"===s?(a=commentPollData.comment.postId,n=$(e.target).closest(".create-poll-container").find(".create-poll"),showLoader(n),r=n.closest(".ajax-image-upload-container").find(".post__comment-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file")):"reply"===s?(a=$(e.target).closest(".post").attr("data-id"),i=$(e.target).closest(".post__comment").attr("data-comment-id"),n=$(e.target).closest(".post__comment-reply").find(".post__reply-create"),showLoader(n,{height:"20px",width:"20px"}),r=n.closest(".ajax-image-upload-container").find(".post__reply-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file")):(1==$(this).closest(".post").length?(a=$(this).closest(".post").attr("data-id"),n=$(this).closest(".post").find(".post__comment-create")):(a=$(e.target).closest(".post").attr("data-id"),n=$(e.target).closest(".post").find(".post__comment-create")),r=n.closest(".ajax-image-upload-container").find(".post__comment-create__upload-img-form.ajax-image-upload-form .ajax-image-upload__file"),showLoader(n,{height:"20px",width:"20px"})),submitPostContentImageForm(e).then(function(e){return 1!=r.length||""==r.val()?$.Deferred().reject({error:"Interrupted Uploading"}):void("poll"===s?commentPollData.post.postText=e.imageDetails:"reply"===s?(xe[i]||o(i,a),xe[i].meta=e.imageDetails):(ve[a]||t(a),ve[a].metadata=e.imageDetails))}).fail(function(e){console.log(e)}).always(function(){hideLoader(n)}),!1},Se=function(e){e&&ve[e]&&delete ve[e]},Oe=function(e){e&&xe[e]&&(xe[e].meta={imageAspectRatio:"0.0",imageWidth:"0"})};window.postContentImageForm=Te,window.deleteCommentImageData=Se,window.deleteReplyImageData=Oe,window.postService=function(){return{handlePostCommentRequest:n,handleCommentReplyRequest:i}};var Me={getMyfeeds:function(e){return $.ajax({method:"GET",url:"/api/feeds",data:e,dataType:"json",contentType:"application/json"})},getCategoryFeeds:function(e){return $.ajax({method:"GET",url:"/api/post/examCategory",data:e,dataType:"json"})},getExamAllFeeds:function(e){return $.ajax({method:"GET",url:"/api/post/exam",data:e,dataType:"json"})},getExamFeeds:function(e){return e.isFeatured=!0,this.getExamAllFeeds(e)},getSubjectFeeds:function(e){return e.isFeatured=!0,this.getSubjectAllFeeds(e)},getSubjectAllFeeds:function(e){return $.ajax({method:"GET",url:"/api/post/subject",data:e,dataType:"json",contentType:"application/json"})},getPostOfUserForMobile:function(e){return $.ajax({method:"GET",url:"/api/post/user",data:e,dataType:"json",contentType:"application/json"})},fetchBookMarks:function(e){return $.ajax({method:"GET",url:"/api/user/bookmarks",data:e})},createBookMark:function(e){return $.ajax({method:"POST",url:"/bookMarks/createBookMark",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},deleteBookMark:function(e){return $.ajax({method:"POST",url:"/bookMarks/deleteBookMark",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},deletePost:function(e){return $.ajax({method:"POST",url:"/posts/deletePost",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},reportSpam:function(e){return $.ajax({method:"POST",url:"/posts/markPostAbuse",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},followPost:function(e){return $.ajax({method:"POST",url:"/posts/followPost",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},unfollowPost:function(e){return $.ajax({method:"POST",url:"/posts/unfollowPost",data:getJSON(e),headers:{ismobile:!0},dataType:"json",contentType:"application/json"})},fetchAboutUs:function(e){return $.ajax({method:"GET",url:"/api/user/about",data:e})}};S(),$(document).on("click",".js-youtube-video",M),O($(".post__content a"))}();//# sourceMappingURL=feeds-53bd2a88fe.js.map
