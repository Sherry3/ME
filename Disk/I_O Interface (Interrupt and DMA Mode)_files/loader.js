function set_visibility(e,t){t?($(e).show(),$(e).removeClass("hidden").addClass("visible")):($(e).hide(),$(e).removeClass("visible").addClass("hidden"))}function parseBoolean(e){return"true"==e}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function isEmail(e){return e.match(EMAIL_PATTERN)}function set_logged_in_user(e,t,n,i){logged_in_user=e,logged_in_user_link=t,logged_in_user_id=n,logged_in_platform=i}function is_logged_in(){return null!==logged_in_user}function is_facebook_login(){return"facebook"==logged_in_platform}function is_twitter_login(){return"twitter"==logged_in_platform}function is_google_login(){return"google"==logged_in_platform}function is_os_login(){return"opinionstage"==logged_in_platform}function is_valid_url(e){return null!=/^(https?:\/\/)?([\da-zA-Z\.-]+)\.([a-z\.]{2,6})([\/\w, \.-]*)*\/?$/.exec(e)}function is_valid_email(e){return null!=/^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/.exec(e)}function set_logged_in_user_from_cookie(){var e=null,t=null,n=null,i=null,r=get_cookies(),o=r.user,a=r["user-url-title"],s=r["user-id"],l=r["user-platform"];o&&(e=unescape_rails_cookie(o),a&&(t=unescape_rails_cookie(a)),"undefined"!=typeof s&&(n=unescape_rails_cookie(s)),"undefined"!=typeof l&&(i=unescape_rails_cookie(l))),set_logged_in_user(e,t,n,i)}function load_fresh(){OSBrowserDetect.isMobileIOS()?window.location.href=Opst.urls.fresh_url+"?src="+document.referrer:(set_logged_in_user_from_cookie(),set_csrf_tags_from_cookie(),load_fresh_content())}function set_csrf_tags_from_cookie(){var e=get_cookies(),t=e["csrf-param"],n=e["csrf-token"];t&&n&&($('meta[name="csrf-param"]').attr("content",unescape_rails_cookie(t)),$('meta[name="csrf-token"]').attr("content",unescape_rails_cookie(n)))}function auth_callback(e,t){e?null===t||""===t?window.location.reload(!0):window.location=t:alert("Failed connecting, may be caused because you did not give your permissions or there is a temporary communication problem with Twitter/Google+.")}function handle_ajax_error_with_alert(e,t){401==e?(logged_in_user=null,$(".login_menu").click()):t&&alert("Unexpected error, please reload page and try again")}function handle_ajax_error(e){handle_ajax_error_with_alert(e,!1)}function handle_vote_ajax_error(e){403==e?(is_logged_in()||Opst.options.cookie_based_voting||Opst.options.hybrid_voting)&&alert("A vote from this IP address was already intercepted"):handle_ajax_error(e)}function add_native_listener(e,t){return window.addEventListener?window.addEventListener(e,t,!1):window.attachEvent("on"+e,t)}function safe_json_parse(e){try{return"string"!=typeof e?{}:JSON.parse(e)}catch(t){return debug("Failure parsing json"),{}}}function remove_fields(e){$(e).prev("input[type=hidden]").val("1");var t=$(e).closest(".fields");t.hide(),t.addClass("removed"),t.removeClass("active")}function add_fields(e,t,n){var i=(new Date).getTime(),r=new RegExp("new_"+t,"g");return $(e).append(n.replace(r,i)),i}function add_fields_fields(e,t,n,i,r,o){var a=null!==r?r:(new Date).getTime(),s=new RegExp("new_"+t,"g");return o=o.replace(s,i),s=new RegExp("new_"+n,"g"),$(e).append(o.replace(s,a)),a}function add_fields_fields_fields(e,t,n,i,r,o,a,s){var l=null!==a?a:(new Date).getTime(),c=new RegExp("new_"+t,"g");return s=s.replace(c,r),c=new RegExp("new_"+n,"g"),s=s.replace(c,o),c=new RegExp("new_"+i,"g"),s=s.replace(c,l),$(e).append(s),l}function get_os_frame(){for(var e=0;e<window.frames.length;e++)if("os_frame"===window.frames[e].name)return window.frames[e]}function get_layout(){return $(".debate").prop("dir")}function validate_field(e,t,n){var i=t($(e).val());return $(e).parent().hasClass("field_with_errors")?i&&($(e).parent().removeClass("field_with_errors"),$(e).parents(".f-row").find(".formError").remove()):i||markAjaxError(e,n),i}function markAjaxError(e,t){row=$(e).parents(".f-row"),row.find(".formError").remove(),row.find(".field_with_errors").find(">input,>label").unwrap(),"undefined"!=typeof t&&""!==t&&($.isArray(t)&&(t=t[0]),row.hasClass("check")?row.find("label:first").after("<div class='formError i18n-dir'>"+t+"</div>"):$(e).after("<div class='formError i18n-dir'>"+t+"</div>"),row.find("label:first").wrap("<div class='field_with_errors'></div>"),$(e).wrap("<div class='field_with_errors'></div>"))}function clear_form_errors(e){$(e).find(".formError").remove(),$(e).find(".field_with_errors").removeClass("field_with_errors").addClass("field_with_no_errors")}function popup(e,t,n){return popupCenter(e,t,n,"authPopup")}function popupCenter(e,t,n,i){var r=screen.width/2-t/2,o=screen.height/2-n/2;return window.open(e,i,"menubar=0,toolbar=0,location=0,resizable=1,scrollbars=1,width="+t+",height="+n+",left="+r+",top="+o)}function getScrollbarWidth(){var e=document.createElement("div");e.className="scrollbar-measure",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}function resize_window(e,t){var n=e.outerWidth(),i=e.outerHeight(),r=getScrollbarWidth(),o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=window.innerWidth||(document.documentElement.clientWidth||document.body.clientWidth)+r,s=window.outerHeight||o;(i>o||n+t>a)&&window.resizeTo(Math.max(n,a)+t,i+(s-o))}function is_in_iframe(){return window!=window.top}function validate_link(e){return e.match(/^\s*$/)||"http://"==e?!1:!0}function add_http_prefix(e){return e.match(/^(http|https)/)?e:"http://".concat(e)}function add_protocol_prefix(e){return e=add_http_prefix(e),"https:"==window.document.location.protocol&&e.replace(/^http/,"https"),e}function get_query_string_parameter(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+t+"=([^&#]*)",i=new RegExp(n),r=i.exec(e);return null==r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function async_load_scripts(e){$.each(e,function(e,t){async_load_script(t)})}function async_load_script(e,t){!function(){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,"undefined"!=typeof t&&(n.onload=t);var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}()}function send_message_to_host(e,t){try{var n=parent.postMessage?parent:parent.document.postMessage?parent.document:void 0;t.widget_page_id=OpinionStage.config.widgetPageId,send_message_internal(n,e,t,!0)}catch(i){debug("Failure sending message to host of type "+e)}}function send_message_to_iframe(e,t){var n=get_os_frame();send_message_internal(n,e,t,!1)}function send_message_internal(e,t,n,i){(!i||is_in_iframe())&&e&&"undefined"!=typeof e&&e.postMessage(JSON.stringify({compId:window.name,type:t,data:n}),"*")}function debug(e,t){DEBUG_MODE&&"undefined"!=typeof console&&console&&"undefined"!=typeof console.log&&console.log&&(console.log("Debug: "+e),t&&console.log(t))}function get_hosting_url(){return Opst.options.hosting_url}function get_cookies(){for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=t[n].substr(0,i),o=t[n].substr(i+1);void 0===e[r]&&(e[r]=o)}return e}function cookie_vote_popup(e,t){var n=Opst.urls.new_votes+"?"+jQuery.param({debate_id:e,side_id:t,hosting_url:encodeURIComponent(get_hosting_url())});return popupCenter(n,410,460,"_blank")}function unescape_rails_cookie(e){return decodeURIComponent(e.replace(/\+/g," "))}function is_voting_by_cookie(){return Opst.options.cookie_based_voting}function is_sample_poll(){return Opst.options.sample_poll}function is_vote_redirect_on(){return Opst.options.redirect_after_vote}function redirect_same_page(){return"same_page"==Opst.options.redirect_mode}function redirect_after_vote(e){if(redirect_same_page())OpinionStage.config.scriptEmbed&&send_message_to_host(OpinionStage.events.redirectRequired,{src_id:get_debate_id(),page_reload:!0});else{var t=Opst.urls.redirect_urls[""];"undefined"!=typeof Opst.urls.redirect_urls[e]&&(t=Opst.urls.redirect_urls[e]),"undefined"!=typeof t&&""!=t.url&&(OpinionStage.config.scriptEmbed?notify_redirect(get_debate_id(),t.url,t.same_window):window.open(t.url))}}function is_hybrid_voting(){return Opst.options.hybrid_voting}function number_of_answers_to_choose(){return Opst.options.answers_to_choose}function get_social_votes_cookie(){return get_cookies().votes}function get_anonymous_votes_cookie(){return get_cookies().anonymous_votes}function get_votes_from_cookie(){var e;return OpinionStage.config.isFriendlyIframe()?OpinionStage.poll.getVotesFromCookie():(e=!is_logged_in()||is_voting_by_cookie()||is_sample_poll()?get_anonymous_votes_cookie():get_social_votes_cookie(),e?unescape_rails_cookie(e).split("."):[])}function get_debate_id(){return $("#os-wrapper").data("debate-id")}function get_votes_filter(){return $(".results-filter a.selected").data("value")}function clear_votes_filter(){$(".results-filter a").removeClass("selected")}function set_votes_filter(e){$(e).hasClass("selected")?$(e).removeClass("selected"):($(".results-filter a").removeClass("selected"),$(e).addClass("selected"))}function is_anonymous_vote_selected(){return $("input[name=anonymous_checkbox]").is(":checked")}function has_user_publicly_voted(){return has_user_voted()&&!is_anonymous_vote_selected()}function has_user_voted(){return"undefined"!=typeof user_side_vote_id()}function poll_has_voting_button(){return $(".debate .vote-bar").find(".voting-button").length>0}function checked_side_element(){return $(".debate .side-votes").find(".user_checked")}function selected_side_element(){return $(".debate .side-votes").find(".os-side.selected")}function correct_side_element(){return $(".debate .side-votes").find(".correct")}function user_side_vote_id(){return $(selected_side_element()).attr("data-side-id")}function checked_sides(){var e,t=[];return $(checked_side_element()).each(function(){e=$(this).attr("data-side-id"),t.push(e)}),t}function all_sides(){return $(".debate .os-side")}function selected_sides(){var e,t=[];return $(selected_side_element()).each(function(){e=$(this).attr("data-side-id"),t.push(e)}),t}function correct_sides(){var e,t=[];return $(correct_side_element()).each(function(){e=$(this).attr("data-side-id"),t.push(e)}),t}function are_answers_correct(){var e=selected_sides(),t=correct_sides();return 0===$(e).not(t).length&&0===$(t).not(e).length}function select_checked_sides(){checked_side_element().each(function(e,t){$(t).removeClass("user_checked").addClass("selected")})}function is_social_vote_blacklisted(){if(OSBrowserDetect.isChromeOnIOS()&&!is_logged_in())return!0;if(!OSBrowserDetect.isAndroid())return!1;for(var e=0;e<SOCIAL_BLACKLISTED_URLS.length;e++)if(document.referrer.match(SOCIAL_BLACKLISTED_URLS[e]))return!0;return!1}function cookie_based_voting_url(){return Opst.urls.base+"/polls/"+get_debate_id()+"/cookie_based_vote"}function profile_based_voting_url(){return Opst.urls.base+"/polls/"+get_debate_id()+"/side_vote"}function profile_based_hide_vote_url(){return Opst.urls.base+"/polls/"+get_debate_id()+"/hide_vote"}function voting_url(){return is_voting_by_cookie()||is_sample_poll()?cookie_based_voting_url():profile_based_voting_url()}function unvote_by_cookie_url(){return Opst.urls.base+"/polls/"+get_debate_id()+"/cookie_based_unvote"}function unvoting_url(){return is_logged_in()?is_voting_by_cookie()||is_sample_poll()?unvote_by_cookie_url():Opst.urls.base+"/polls/"+get_debate_id()+"/side_unvote":unvote_by_cookie_url()}function is_poll_closed(){return Opst.options.closed}function sharing_image_url(e){var t=$("meta[property='og:image']").attr("content");if(!Opst.options.custom_fb_image){e="undefined"!=typeof e?e:selected_side_element();var n=$(e).attr("data-sharing-image");if("undefined"!=typeof n&&""!=n)return n}return t}function is_other_side_checked(){var e=!1,t=checked_side_element();return 0==t.length?!1:($(t).each(function(t,n){return $(n).hasClass("other")?(e=!0,void 0):void 0}),e)}function get_user_answer(){var e="";return Opst.debate.multi_choice()&&is_other_side_checked()&&(e=checked_side_element().find(".other-field").val().substring(0,100)),e}function show_tab(e){$(".os-tab-content .os-tab").filter("[data-tab='"+e+"']").animate({opacity:1},250,function(){})}function set_active_tab(e){$(".os-tab-content .os-tab").removeClass("active").filter("[data-tab='"+e+"']").addClass("active").css("opacity",0),"ad"==e&&($(".counting-label").addClass("visible"),$(".close-ad-link").removeClass("visible")),show_tab(e)}function clear_social_voters_lists(){$("#social-voters-overlay-container .content").empty()}function prepare_social_voters_overlay(e){var t=$("#social-voters-overlay-container .content");return $.ajax({url:"/polls/"+get_debate_id()+"/debate_votes",type:"GET",dataType:"html",data:{side_id:e,votes_filter:get_votes_filter()},success:function(n){e?t.append(n):t.html(n),$(".social-voters-overlay").hide(),adjust_social_voters_overlay(),e&&$(".social-voters-overlay."+e).show()},error:function(e){handle_ajax_error(e.status)},complete:function(){}}),!0}function display_social_voters_overlay(e){$(".social-voters-overlay."+e).length>0?($(".social-voters-overlay").hide(),$(".social-voters-overlay."+e).show()):prepare_social_voters_overlay(e),display_overlay("#social-voters-overlay-container")}function close_social_voters_overlay(){close_overlay("#social-voters-overlay-container")}function notify_height_changed(){send_message_to_host(OpinionStage.events.heightChanged,{height:widget_height(),src_id:get_debate_id(),user_voted:has_user_voted()})}function notify_vote(e,t){send_message_to_host(OpinionStage.events.voted,{src_id:e,auto_switch:t,sides:selected_sides()})}function notify_redirect(e,t,n){send_message_to_host(OpinionStage.events.redirectRequired,{src_id:e,url:t,same_window:n})}function generate_vote_message(e,t){if(e="undefined"!=typeof e?e:selected_side_element(),t="undefined"!=typeof t?t:is_anonymous_vote_selected(),"undefined"==typeof e||0==e.length||Opst.debate.multi_selection())return"";var n=$(e).attr("data-side-label"),i=t?$(e).attr("data-anonymous-side-share"):$(e).attr("data-side-share"),r=$(".debate").data("creator-name");return r.match(/s$/)&&(i=i.replace("#{user}'s",r+"'")),i.replace("#{user}",r).replace("#{side}",n)}function twitter_sharing_message(){var e="";if(Opst.options.custom_twitter_sharing)e=Opst.options.twitter_sharing_message;else{var t=has_user_publicly_voted()?generate_vote_message():"";e=$("meta[property='og:title']").attr("content")+"; "+t}return e}function login_popup(e){var t="layout=slim&locale="+Opst.options.locale+"&user_answer="+get_user_answer();"undefined"!=typeof e&&(t=t+"&"+jQuery.param(e));var n=Opst.urls.new_registration+"?"+t;return popupCenter(n,380,380,"_blank")}function share_poll_on_facebook(e,t){var n={url:get_sharing_url(),title:$("meta[property='og:title']").attr("content"),image:sharing_image_url(e)};if(OpinionStage.config.isFriendlyIframe())OSSharer.facebook.shareFeedViaGateway(n);else{var i=Opst.options.custom_fb_sharing?"":generate_vote_message(e,t),r=""==i?$("meta[property='og:description']").attr("content"):i+" "+$("meta[property='og:description']").attr("content").toLowerCase();n.description=r,OSSharer.facebook.shareFeed(n)}}function poll_sharing_meta(){return{url:get_sharing_url(),title:get_sharing_title(),description:get_sharing_description(),image:sharing_image_url(),twitter_sharing_message:twitter_sharing_message(),twitter_via:Opst.options.twitter_via,twitter_hashtags:Opst.options.twitter_hashtags,twitter_related:Opst.options.twitter_related}}function post_vote_action(){show_facebook_page_if_needed()||show_lead_form_if_needed(),notify_vote(get_debate_id(),!0)}function is_first_time_embed(){return 1==Opst.options.short_urls_count&&null==get_hosting_url().match(/opinionstage\.com/)}function shouldShowLeadForm(){return Opst.options.has_lead_form&&!OpinionStage.leadForm.formAlreadySubmitted()}function shouldShowFacebookPage(){return Opst.options.has_facebook_page&&!OpinionStage.fbPageLikes.alreadyDisplayed()}function show_lead_form_if_needed(){return shouldShowLeadForm()?(OpinionStage.leadForm.setSelectionsString(selected_sides().join(",")),set_active_tab("form"),!0):!1}function show_facebook_page_if_needed(){return shouldShowFacebookPage()?(set_active_tab("fb-page-likes"),!0):!1}function track_ga_event(e,t,n,i){var r=window._gaq||(window._gaq=[]);r.push(["_trackEvent",e,t,n,i])}function track_ga_social_event(e,t,n){var i=window._gaq||(window._gaq=[]);i.push(["_trackSocial",e,t,n])}function track_ga_virtual_page(e){var t=window._gaq||(window._gaq=[]);t.push(["_trackPageview",e])}function load_twitter_scripts(){script_path=("https:"==document.location.protocol?"https:":"http:")+"//platform.twitter.com/widgets.js",async_load_script(script_path)}function init_facebook(e,t){window.fbAsyncInit=function(){FB.init({appId:e,version:"v2.6",cookie:!0,status:!0,oauth:!0,xfbml:!0}),FB.getLoginStatus(function(){}),{scope:t}}}function trackFacebook(e){try{FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(t){track_ga_social_event("facebook","like",t,e)}),FB.Event.subscribe("edge.remove",function(t){track_ga_social_event("facebook","unlike",t,e)}),FB.Event.subscribe("message.send",function(t){track_ga_social_event("facebook","send",t,e)}))}catch(t){}}function extend_options(e,t){var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}Array.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var EMAIL_PATTERN=/^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i,logged_in_user=null,logged_in_user_link=null,logged_in_user_id=null,logged_in_platform=null,DEBUG_MODE=!1,SOCIAL_BLACKLISTED_URLS=[/^https?:\/\/www\.ynet\.co\.il\/Iphone\/.*(android,\d\d\.html)$/];!function(e){e.extend=function(t,n){var i;void 0===n&&(n=t,t=e);for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}}(window.OpinionStage=window.OpinionStage||{}),function(e){e.core=e.core||{},e.extend(e.core,{getElementsByClassName:function(e,t){if("undefined"!=typeof e.getElementsByClassName)return e.getElementsByClassName(t);for(var n=[],i=new RegExp("(^| )"+t+"( |$)"),r=e.getElementsByTagName("*"),o=0,a=r.length;a>o;o++)i.test(r[o].className)&&n.push(r[o]);return n},trim:function(e){return e.trim?null==e?"":e.trim():null==e?"":e.toString().replace(/^\s+/,"").replace(/\s+$/,"")},isMobile:function(){var e=window.navigator.userAgent;return/Mobile|webOS|BlackBerry|SymbianOS/i.test(e)&&!/iPad/i.test(e)},popupCenter:function(e,t,n,i){var r=screen.width/2-t/2,o=screen.height/2-n/2;return window.open(e,i,"menubar=0,toolbar=0,status=0,location=0,resizable=1,scrollbars=1,width="+t+",height="+n+",left="+r+",top="+o)},encode:function(e){return encodeURIComponent(e).replace("!","%21").replace("'","%27").replace("~","%7E").replace("(","%28").replace(")","%29").replace("-","%2D")}})}(window.OpinionStage=window.OpinionStage||{}),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return-1;var o=+t||0;if(1/0===Math.abs(o)&&(o=0),o>=r)return-1;for(n=Math.max(o>=0?o:r-Math.abs(o),0);r>n;){if(n in i&&i[n]===e)return n;n++}return-1}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t})}(),function(e){e.core=e.core||{};var t=[],n=!1,i=!1,r=function(){if(!n){n=!0;for(var e=0;e<t.length;e++)t[e].fn.call(window,t[e].ctx);t=[]}},o=function(){"complete"===document.readyState&&r()};e.extend(e.core,{docReady:function(e,a){return n?(setTimeout(function(){e(a)},1),void 0):(t.push({fn:e,ctx:a}),"complete"===document.readyState?setTimeout(r,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",o),window.attachEvent("onload",r)),i=!0),void 0)}})}(window.OpinionStage=window.OpinionStage||{}),function(e){function t(t){e.logger&&e.logger.warn(t)}function n(e){var t="https:"==window.document.location.protocol?"https://":"http://";return e=e.replace(/^https?:\/\//,""),t+e}function i(){var e=null;try{if("withCredentials"in new XMLHttpRequest)e=new XMLHttpRequest;else if("undefined"!=typeof XDomainRequest)e=new XDomainRequest,e.onload=function(){e.readyState=4,e.status=200,e.onreadystatechange()};else if("undefined"!=typeof ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){e=new ActiveXObject("Microsoft.XMLHTTP")}else t("Cors is not supported");if(null!==e)return e;t("Failed sending ajax request")}catch(n){t("Failed sending ajax request")}}e.cors=e.cors||{},e.extend(e.cors,{ajax:function(t,r,o,a,s){var l,c,u,d=i(),s=s||"text";if(t=n(t),d&&t){d.overrideMimeType&&d.overrideMimeType("text/xml"),a=a||"GET","POST"==a&&(c=t.split("?"),t=c[0],l=c[1]),u="uid="+(new Date).getTime(),t+=t.indexOf("?")+1?"&":"?",t+=u;try{d.open(a,t,!0)}catch(f){return}"POST"==a&&void 0!==d.setRequestHeader&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var t="";d.responseText&&(t=d.responseText),r&&("json"==s.toLowerCase()&&(t=e.core.parseJson(t)),r(t,o))}},d.send(l)}}})}(window.OpinionStage=window.OpinionStage||{}),function(e){function t(e,t){var n;"js"==t?(n=document.createElement("script"),n.src=e,n.async=!0):(n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e)),document.getElementsByTagName("head")[0].appendChild(n)}e.renderer=e.renderer||{},e.extend(e.renderer,{addStylesheet:function(e){var t=document.createElement("style");t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)},addCss:function(e){t(e,"css")},addJS:function(e){t(e,"js")},createMetaNode:function(e,t){var n=document.createElement("meta");return n.setAttribute("property",e),n.content=t,n}})}(window.OpinionStage=window.OpinionStage||{}),function(e){e.core=e.core||{};var t=t||{},n=/^[\],:{}\s]*$/,i=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,r=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g;t.stringify=t.stringify||function(e){var n=typeof e;if("object"!=n||null===e)return"string"==n&&(e='"'+e+'"'),String(e);var i,r,o=[],a=e&&e.constructor==Array;for(i in e)r=e[i],n=typeof r,"string"==n?r='"'+r+'"':"object"==n&&null!==r&&(r=t.stringify(r)),o.push((a?"":'"'+i+'":')+String(r));return(a?"[":"{")+String(o)+(a?"]":"}")},e.extend(e.core,{parseJson:function(t){try{return"string"==typeof t&&t?(t=e.core.trim(t),window.JSON&&window.JSON.parse?window.JSON.parse(t):n.test(t.replace(i,"@").replace(r,"]").replace(o,""))?new Function("return "+t)():""):null}catch(a){return""}}})}(window.OpinionStage=window.OpinionStage||{}),function(e){var t="https:"==window.document.location.protocol?"https://":"http://",n={protocol:t,host:"www.opinionstage.com",log:!1,moduleName:"Widget",hostWithProtocol:function(){return n.protocol+n.host}};e.config=e.config||{},e.extend(e.config,n)}(window.OpinionStage=window.OpinionStage||{}),function(e){e.logger=e.logger||{};var t={fatal:0,error:1,warn:2,info:3,debug:4},n=t.warn,i=function(t,n){var i=new Date;"undefined"!=typeof console&&console&&"undefined"!=typeof console.log&&console.log&&(e.config.log||n)&&console.log("["+i.getSeconds()+":"+i.getMilliseconds()+"] "+t)};e.extend(e.logger,{debug:function(r){n>=t.debug&&i("[OpinionStage:"+e.config.moduleName+"] DEBUG - "+r,!1)},info:function(r){n>=t.info&&i("[OpinionStage:"+e.config.moduleName+"] INFO - "+r,!1)},warn:function(r){n>=t.warn&&i("[OpinionStage:"+e.config.moduleName+"] WARN - "+r,!0)},error:function(r){n>=t.error&&i("[OpinionStage:"+e.config.moduleName+"] ERROR - "+r,!0)},fatal:function(r){n>=t.fatal&&i("[OpinionStage:"+e.config.moduleName+"] FATAL - "+r,!0)},setLevel:function(e){n=t[e]||t.warn},getLevel:function(){return n}})}(window.OpinionStage=window.OpinionStage||{}),function(e){e.messenger=e.messenger||{};var t=!1,n={},r=function(t){if(-1!=t.origin.indexOf("opinionstage.com")||-1!=t.origin.indexOf(document.location.hostname)){var r=e.core.parseJson(t.data);if(null==r||void 0===r.type)return;if(void 0===n[r.type])return e.logger.info("no listener for "+r.type),void 0;for(i=0;i<n[r.type].length;i++)try{e.logger.info("Invoking listener of "+r.type),n[r.type][i]({name:r.type,data:r.data},t.source)}catch(o){e.logger.warn("Failed invoking listener "+o)}}},o=function(t,n,i){t&&"undefined"!=typeof t&&(e.logger.info("Sending message "+n),t.postMessage(JSON.stringify({compId:window.name,type:n,data:i}),"*"))},a=function(e,t){n[e]=n[e]||[],n[e].push(t)};e.extend(e.messenger,{init:function(){return t?(e.logger.warn("Messenger already initialized"),void 0):(window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r),t=!0,void 0)},register:function(e,t){for(i=0;i<e.length;i++)a(e[i],t)},sendMessageToHost:function(t,n,i){e.logger.info("Sending message of type "+n+" to host"),i.src_id=t;var r=parent.postMessage?parent:parent.document.postMessage?parent.document:void 0;o(r,n,i)}})}(window.OpinionStage=window.OpinionStage||{}),function(e){e.events={widgetLoaded:"widgetLoaded",heightChanged:"heightChanged",leadFormSubmitted:"leadFormSubmitted",fbLikeClicked:"fbLikeClicked",fbPageLikesShouldClose:"fbPageLikesShouldClose",startEngagementClicked:"startEngagementClicked",engagementEnded:"engagementEnded",selectionsFinished:"selectionsFinished",resultCalculated:"resultCalculated",cardOptionClicked:"cardOptionClicked",cardContinueClicked:"cardContinueClicked",cardEngagementEnded:"cardEngagementEnded",cardChanged:"cardChanged",retakeClicked:"retakeClicked",scrollRequired:"scrollRequired",cardAnimationCompleted:"cardAnimationCompleted",cardNextExplanationClicked:"cardNextExplanationClicked",textInputChanged:"textInputChanged",variableUpdated:"variableUpdated",closingCardPresented:"closingCardPresented",pollSetHeightChanged:"pollSetHeightChanged",voted:"pollVote",redirectRequired:"redirect",applyConfig:"applyConfiguration",startResizing:"startResizing",stopResizing:"stopResizing"}}(window.OpinionStage=window.OpinionStage||{}),function(e){e.core=e.core||{},e.extend(e.core,{getURLParam:function(e){if(0==document.location.search.length)return null;var t=e.toLowerCase(),n=document.location.search.substring(1).split("&");for(i=0;i<n.length;i++){var r=n[i].split("=");if(r.length>1&&r[0].toLowerCase()==t)return r[1]}return null},getUrlParams:function(){if(0==document.location.search.length)return[];var e=[],t=document.location.search.substring(1).split("&");for(i=0;i<t.length;i++){var n=t[i].split("=");n.length>1&&e.push({parameter:n[0],value:n[1]})}return e},addHashParam:function(e,t){var n=e,i=e.indexOf("#");return i>0&&(n=e.substring(0,i)),n+"#"+t},addURLParam:function(e,t,n){var i="",r=e,o="",a="",s=e.indexOf("#");s>0&&(i=e.substring(s,e.length),r=e.substring(0,s));var l=r.split("?");if(l.length>1)for(var c=l[1].split("&"),u=0;u<c.length;u++)a=c[u].split("="),a[0]!=t&&(""==o?o="?":o+="&",o+=a[0]+"="+(a[1]?a[1]:""));return""==o&&(o="?"),""!==o&&"?"!=o&&(o+="&"),o+=t+"="+(n?n:""),l[0]+o+i}})}(window.OpinionStage=window.OpinionStage||{}),function(e){e.renderer=e.renderer||{},e.extend(e.renderer,{createSpinner:function(e,t,n){var i=new Image,r="position:absolute; left:50%; margin-left:-16px; margin-top:-16px;width:auto !important;height:auto !important;";if(n||(r+="top:50%;"),i.src="data:image/gif;base64,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IGVzdGFibGlzaGVkIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IENhbid0IGNvbm5lY3QgdG8gbG9jYWwgTXlTUUwgc2VydmVyIHRocm91Z2ggc29ja2V0ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snICgyKSBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+CjxiciAvPgo8Yj5XYXJuaW5nPC9iPjogIG15c3FsX3F1ZXJ5KCkgWzxhIGhyZWY9J2Z1bmN0aW9uLm15c3FsLXF1ZXJ5Jz5mdW5jdGlvbi5teXNxbC1xdWVyeTwvYT5dOiBBIGxpbmsgdG8gdGhlIHNlcnZlciBjb3VsZCBub3QgYmUgZXN0YWJsaXNoZWQgaW4gPGI+L2hvbWUvYWpheGxvYWQvd3d3L2xpYnJhaXJpZXMvY2xhc3MubXlzcWwucGhwPC9iPiBvbiBsaW5lIDxiPjY4PC9iPjxiciAvPgo8YnIgLz4KPGI+V2FybmluZzwvYj46ICBteXNxbF9xdWVyeSgpIFs8YSBocmVmPSdmdW5jdGlvbi5teXNxbC1xdWVyeSc+ZnVuY3Rpb24ubXlzcWwtcXVlcnk8L2E+XTogQ2FuJ3QgY29ubmVjdCB0byBsb2NhbCBNeVNRTCBzZXJ2ZXIgdGhyb3VnaCBzb2NrZXQgJy92YXIvcnVuL215c3FsZC9teXNxbGQuc29jaycgKDIpIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IEEgbGluayB0byB0aGUgc2VydmVyIGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+Cg==",i.style.cssText=r,i.className=e,t){var o=document.createElement("div");
return o.className="os-spinner-container",o.style.cssText="position:relative;height: 25px;",o.appendChild(i),o}return i},createIframe:function(t,n,i){e.logger.info("Inserting iframe with src "+t);var r=document.createElement("iframe"),o="border: none;margin-bottom: 0 !important;";return"100%"==n?o+="width: 1px;min-width: 100%;max-width: 640px":r.setAttribute("width",n),r.setAttribute("height",i),r.setAttribute("frameBorder","0"),r.setAttribute("scrolling","no"),r.setAttribute("style",o),r.setAttribute("src",t),r.setAttribute("name","os_frame"),r.setAttribute("webkitallowfullscreen",""),r.setAttribute("mozallowfullscreen",""),r.setAttribute("allowfullscreen",""),r},insertIframe:function(t,n,i,r){var o=e.renderer.createIframe(t,n,i);r.insertBefore(o,r.firstChild)},insertFriendlyIframe:function(t,n,i,r,o){e.logger.info("Inserting friendly iframe with loader "+t);var a=e.renderer.createIframe("javascript:false",n,i);r.insertBefore(a,r.firstChild);var s=JSON.stringify(o),l=a.contentWindow.document;l.open().write("<head></head><body onload='window.inDapIF = true;(function (opinionStage) {opinionStage.options = "+s+";"+"})(window.OpinionStage = window.OpinionStage || {} );"+'var js = document.createElement("script");'+'js.src = "'+t+'";'+"document.body.appendChild(js);'>"),l.close()}})}(window.OpinionStage=window.OpinionStage||{}),function(e){var t={protocol:"https:"==window.document.location.protocol?"https://":"http://",log:"1"==e.core.getURLParam("debug"),moduleName:"Loader",waitForDomReady:!1,widgetTopContainerClass:"os_widget_container",feedTopContainerClass:"os_feed_container",widgetDivClass:"os_widget",feedDivClass:"os_feed",feedMoreClass:"os_feed_more",feedTableClass:"os_feed_table",pollDivClass:"os_poll",spinnerClass:"os_spinner",overrideWidgetParam:"oswidget",startFromParam:"start_from",feedElementsCount:10,feedDefaultLinkText:"Click for more",answerParamRegExp:/^c\d{1,2}$/i,isMobile:e.core.isMobile(),platformClass:e.core.isMobile()?"os-mobile":"os-desktop",feedUrl:function(t,n){var i="?limit="+e.config.feedElementsCount+"&offset="+t;return null!=n&&(i=i+"&of="+n),e.config.hostWithProtocol()+"/api/v1/feed"+i},pollUrl:function(t,n){return e.config.hostWithProtocol()+t+"/poll?sembed=1&wid="+n},fifLoaderUrl:function(t){return e.config.hostWithProtocol()+t+"/loader.js"}};e.extend(e.config,t)}(window.OpinionStage=window.OpinionStage||{}),function(e){function t(e){return width=e.getAttribute("data-width"),"undefined"!=typeof width&&null!=width&&parseInt(width)>0||(width="100%"),width}function n(t,n){var i=document.createElement("div");return i.className=e.config.widgetTopContainerClass+" "+e.config.widgetTopContainerClass+n,i.style.clear="both",i.style.marginBottom="20px",i.appendChild(e.renderer.createSpinner(e.config.spinnerClass)),t.appendChild(i),i}function r(i,r){var o=t(i),a=i.getAttribute("data-height"),s=i.getAttribute("data-path"),l="false";("undefined"==typeof a||null==a)&&(a="0");var c=n(i,r);if("true"==l){var u={widgetPageId:r,moduleName:"Widget_"+r,scriptEmbed:!0};e.renderer.insertFriendlyIframe(e.config.fifLoaderUrl(s),o,a,c,u)}else e.renderer.insertIframe(e.config.pollUrl(s,r),o,a,c)}function o(r,o,a){var s=t(r),l=r.getAttribute("data-height"),c="false"==r.getAttribute("data-comments")?"0":"1",u="true"==r.getAttribute("data-recommendations")?"1":"0",d=r.getAttribute("data-path"),f="undefined"==typeof r.getAttribute("data-of")||null==r.getAttribute("data-of")?"":r.getAttribute("data-of"),p="false"==r.getAttribute("data-autoswitch")?"0":"1",h=null!=a?a:d,g=get_query_string_parameter(document.URL,"os_utm_source"),m=e.config.hostWithProtocol()+h+"?wid="+o+"&em=1&comments="+c+"&recommendations="+u+"&referring_widget="+d+"&autoswitch="+p+"&of="+f+"&os_utm_source="+g;"undefined"!=typeof s&&null!=s&&parseInt(s)>0||(s="100%"),("undefined"==typeof l||null==l)&&(l="0");var v=OpinionStage.core.getURLParam(e.config.startFromParam);if(null!=v){m+="&start_from="+v;var y=e.core.getUrlParams();for(i=0;i<y.length;i++)y[i].parameter.match(e.config.answerParamRegExp)&&(m+="&"+y[i].parameter+"="+y[i].value)}var b=n(r,o);if("true"==r.getAttribute("data-fif")){var _={widgetPageId:o,isEmbedded:!0,showComments:"1"==c,showRecommendations:"1"==u,hostingUrl:window.location.href,moduleName:"Widget_"+o};e.renderer.insertFriendlyIframe(e.config.fifLoaderUrl(h),s,l,b,_)}else e.renderer.insertIframe(m,s,l,b)}function a(e){e.style.position="relative",e.style.minHeight="200px"}function s(){var t=e.core.getElementsByClassName(document,e.config.widgetDivClass),n=e.core.getElementsByClassName(document,e.config.pollDivClass),i=OpinionStage.core.getURLParam(e.config.overrideWidgetParam);e.logger.info("Rendering all interactive widgets, "+n.length+" polls, "+t.length+" widgets");for(var s=0;s<t.length;s++)a(t[s]),null!=i&&0==s?(e.logger.info("Rendering widget (from recommended content)"),o(t[s],s,decodeURIComponent(i))):(e.logger.info("Rendering widget"),o(t[s],s)),d[s]=t[s];for(var s=0;s<n.length;s++)e.logger.info("Rendering poll"),null!=n[s].getAttribute("data-path")?(r(n[s],t.length+s),a(n[s]),d[t.length+s]=n[s]):e.logger.info("Aborting poll render, legacy embed")}function l(t){var n=0,i="",r=e.core.getElementsByClassName(d.feed,e.config.feedMoreClass);r.length>0&&(n=parseInt(r[0].getAttribute("data-offset")),i=r[0].getAttribute("data-of"),link_text=r[0].getAttribute("data-link-text")),e.renderer.removeFeedMoreItemsLink(d.feed),e.core.getElementsByClassName(d.feed,"os_feed_container")[0].appendChild(e.renderer.createSpinner(e.config.spinnerClass,!0,!1)),e.cors.ajax(e.config.feedUrl(n,i),c,{initial_render:!1,offset:n+e.config.feedElementsCount,of:i,link_text:link_text},"GET","json"),t=t||window.event,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function c(t,n){if(null==t||null==t.rows||0==t.rows.length)return e.renderer.removeFeedMoreItemsLink(d.feed),e.renderer.removeSpinner("feed"),void 0;for(var i=e.config.feedDivClass+"_table"+" "+e.config.platformClass,r="",o="os-feed-"+parseInt(1e3*Math.random()),a=null,s=0;s<t.rows.length;s++)r+=e.renderer.feedEntryHtmlCode(t.rows[s]);if(n.initial_render?(a=document.createElement("div"),a.id=o,a.className=e.config.feedTopContainerClass,a.style.clear="both",a.style.marginBottom="20px",a.innerHTML='<table class="'+i+'">'+r+"</table>",e.renderer.addStylesheet(e.renderer.generateFeedCss(o))):a=e.core.getElementsByClassName(d.feed,e.config.feedTopContainerClass)[0],t.has_more){var c=e.renderer.createFeedMoreItemsLink(n.link_text,n.offset,n.of);c.addEventListener?c.addEventListener("click",l,!1):c.attachEvent("onclick",l),a.appendChild(c)}e.renderer.removeSpinner("feed"),n.initial_render?d.feed.appendChild(a):e.core.getElementsByClassName(d.feed,e.config.feedTableClass)[0].innerHTML+=r}function u(t){var n=OpinionStage.core.getURLParam(e.config.overrideWidgetParam),i=t.getAttribute("data-of"),r=t.getAttribute("data-link-text");null==r&&(r=e.config.feedDefaultLinkText),t.style.position="relative",t.style.minHeight="200px",null!=n?(o(t,0,decodeURIComponent(n)),d[0]=t):(d.feed=t,t.appendChild(e.renderer.createSpinner(e.config.spinnerClass)),e.cors.ajax(e.config.feedUrl(0,i),c,{initial_render:!0,offset:e.config.feedElementsCount,of:i,link_text:r},"GET","json"))}e.renderer=e.renderer||{};var d={};e.extend(e.renderer,{renderAll:function(){var t=e.core.getElementsByClassName(document,e.config.feedDivClass);t.length>0?u(t[0]):s()},getWidgetContainer:function(e){return d[e]},removeSpinner:function(t){var n=e.renderer.getWidgetContainer(t),i=e.core.getElementsByClassName(n,e.config.spinnerClass);if(0!=i.length){var r=i[0].parentNode;i[0].parentNode.removeChild(i[0]),"os-spinner-container"==r.className&&r.parentNode.removeChild(r)}},resizeIframe:function(t,n){var i=e.renderer.getWidgetContainer(t);if(null!=i){var r=i.getElementsByTagName("IFRAME")[0],o=i.getAttribute("data-width"),a="opacity: 1;border: none;margin: auto;height:"+n+"px;max-height:"+n+"px !important;";"undefined"!=typeof o&&null!=o&&parseInt(o)>0||(a+="width: 1px;min-width: 100%;max-width: 640px"),r.style.cssText=a}}})}(window.OpinionStage=window.OpinionStage||{}),function(e){e.renderer=e.renderer||{},e.extend(e.renderer,{generateFeedCss:function(e){return"#"+e+" table.os_feed_table {width: 100%; border-collapse: collapse; border:none; margin: 0;}"+"#"+e+" table.os_feed_table td, "+"#"+e+" table.os_feed_table th{border:none;}"+"#"+e+" table.os_feed_table.os-desktop tr.os_feed_tr {border-bottom: 1px #e5e5e5 solid; height: 100px;}"+"#"+e+" table.os_feed_table.os-desktop td.os_feed_td_image {position: relative; width: 180px; padding: 20px 0;}"+"#"+e+" table.os_feed_table.os-mobile td.os_feed_td_image {padding: 0;}"+"#"+e+" table.os_feed_table.os-desktop td.os_feed_td_image img {position: relative; height: 115px;}"+"#"+e+" table.os_feed_table.os-desktop td.os_feed_td_info {vertical-align: top; padding: 20px 0;}"+"#"+e+" table.os_feed_table.os-mobile td.os_feed_td_info {padding: 10px 0;}"+"#"+e+" table.os_feed_table td.os_feed_td_info .os_feed_title {font-size: 18px; font-weight: bold; display: block;}"+"#"+e+" table.os_feed_table.os-mobile  td.os_feed_td_info .os_feed_title {min-height: 36px;line-height: 18px;}"+"#"+e+" table.os_feed_table td.os_feed_td_info .os_feed_description {font-size: 15px;}"+"#"+e+" table.os_feed_table a.os_feed_link {text-decoration: none; border:none;}"+"#"+e+" a.os_feed_more {text-decoration: initial; background-color: rgba(34, 33, 32, 0.05); display: block; width: 100%; padding: 14px 0; color: #222120; text-align: center; border: none; font-size: 16px;}"},feedEntryHtmlCode:function(t){var n=OpinionStage.core.addURLParam(document.location.href,"oswidget",encodeURIComponent(t.path)),i=e.config.isMobile?t.image_mobile:t.image,r=e.config.feedDivClass,o='<tr class="'+r+"_tr"+'">'+'<td class="'+r+"_td_image"+'">'+'<a href="'+n+'" class="'+r+"_link"+'">'+'<img src="'+i+'">'+"</a>"+"</td>";return o+=e.config.isMobile?'</tr><tr><td class="'+r+"_td_info"+'">'+'<a href="'+n+'" class="'+r+"_link"+" "+r+"_title"+'">'+t.title+"</a>"+"</td>"+"</tr>":'<td class="'+r+"_td_info"+'">'+'<a href="'+n+'" class="'+r+"_link"+" "+r+"_title"+'">'+t.title+"</a>"+'<div class="'+r+"_description"+'">'+t.description+"</div>"+"</td>"+"</tr>"},removeFeedMoreItemsLink:function(t){var n=e.core.getElementsByClassName(t,e.config.feedMoreClass);return 0==n.length?null:(n[0].parentNode.removeChild(n[0]),n[0])},createFeedMoreItemsLink:function(t,n,i){var r=document.createElement("a");return r.href="javascript:void(0)",r.innerHTML=decodeURIComponent(t),r.className=e.config.feedMoreClass,r.setAttribute("data-offset",n),r.setAttribute("data-of",i),r.setAttribute("data-link-text",t),r}})}(window.OpinionStage=window.OpinionStage||{}),function(e){function t(t){null!=t.data.widget_page_id&&e.renderer.removeSpinner(t.data.widget_page_id)}function n(t){null!=t.data.widget_page_id&&e.renderer.resizeIframe(t.data.widget_page_id,t.data.height)}function i(e){e.data.page_reload?(window.location.hash=e.data.src_id,window.location.reload()):e.data.same_window?window.location.href=e.data.url:window.open(e.data.url)}function r(t){if(null!=t.data.widget_page_id){e.logger.info("handleScrollRequired");var n=e.renderer.getWidgetContainer(t.data.widget_page_id);n.scrollIntoView(!0)}}function o(e){"function"==typeof window.OpinionStageEventsSubscriber&&window.OpinionStageEventsSubscriber(e.name,e.data)}function a(e){e.data.gtm_trackable&&("undefined"==typeof window.dataLayer&&(dataLayer=[]),dataLayer.push({event:e.name,OS_data:e.data}))}var s=e.config,l=function(){s.initialized||(s.initialized=!0,s.waitForDomReady?e.core.docReady(c):c())},c=function(){e.renderer.renderAll(),e.messenger.init(),e.messenger.register([e.events.widgetLoaded],t),e.messenger.register([e.events.heightChanged],n),e.messenger.register([e.events.redirectRequired],i),e.messenger.register([e.events.scrollRequired],r),e.messenger.register([e.events.widgetLoaded,e.events.cardChanged,e.events.startEngagementClicked,e.events.cardOptionClicked,e.events.cardAnimationCompleted,e.events.cardNextExplanationClicked,e.events.textInputChanged],o),e.messenger.register([e.events.cardOptionClicked,e.events.resultCalculated,e.events.closingCardPresented],a)};l()}(window.OpinionStage=window.OpinionStage||{});